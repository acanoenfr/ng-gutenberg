{"version":3,"sources":["@wordpress/block-editor/src/components/media-upload/index.native.js"],"names":["React","requestMediaPickFromMediaLibrary","requestMediaPickFromDeviceLibrary","requestMediaPickFromDeviceCamera","__","Picker","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_CHOOSE_FROM_DEVICE","MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_TAKE_MEDIA","MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_WORD_PRESS_LIBRARY","OPTION_TAKE_VIDEO","OPTION_TAKE_PHOTO","MediaUpload","mediaType","props","icon","getChooseFromDeviceIcon","value","label","getTakeMediaIcon","getTakeMediaLabel","getWordPressLibraryIcon","onMediaLibraryButtonPressed","mediaId","mediaUrl","onSelectURL","onMediaUploadButtonPressed","onMediaCaptureButtonPressed","mediaOptions","getMediaOptionsItems","picker","onPickerPresent","presentPicker","getMediaOptions","instance","render","open","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport React from 'react';\nimport {\n\trequestMediaPickFromMediaLibrary,\n\trequestMediaPickFromDeviceLibrary,\n\trequestMediaPickFromDeviceCamera,\n} from 'react-native-gutenberg-bridge';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Picker } from '@wordpress/components';\n\nexport const MEDIA_TYPE_IMAGE = 'image';\nexport const MEDIA_TYPE_VIDEO = 'video';\n\nexport const MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_CHOOSE_FROM_DEVICE = 'choose_from_device';\nexport const MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_TAKE_MEDIA = 'take_media';\nexport const MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_WORD_PRESS_LIBRARY = 'wordpress_media_library';\n\nexport const OPTION_TAKE_VIDEO = __( 'Take a Video' );\nexport const OPTION_TAKE_PHOTO = __( 'Take a Photo' );\n\nexport class MediaUpload extends React.Component {\n\tgetTakeMediaLabel() {\n\t\tconst { mediaType } = this.props;\n\n\t\tif ( mediaType === MEDIA_TYPE_IMAGE ) {\n\t\t\treturn OPTION_TAKE_PHOTO;\n\t\t} else if ( mediaType === MEDIA_TYPE_VIDEO ) {\n\t\t\treturn OPTION_TAKE_VIDEO;\n\t\t}\n\t}\n\n\tgetMediaOptionsItems() {\n\t\treturn [\n\t\t\t{ icon: this.getChooseFromDeviceIcon(), value: MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_CHOOSE_FROM_DEVICE, label: __( 'Choose from device' ) },\n\t\t\t{ icon: this.getTakeMediaIcon(), value: MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_TAKE_MEDIA, label: this.getTakeMediaLabel() },\n\t\t\t{ icon: this.getWordPressLibraryIcon(), value: MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_WORD_PRESS_LIBRARY, label: __( 'WordPress Media Library' ) },\n\t\t];\n\t}\n\n\tgetChooseFromDeviceIcon() {\n\t\tconst { mediaType } = this.props;\n\n\t\tif ( mediaType === MEDIA_TYPE_IMAGE ) {\n\t\t\treturn 'format-image';\n\t\t} else if ( mediaType === MEDIA_TYPE_VIDEO ) {\n\t\t\treturn 'format-video';\n\t\t}\n\t}\n\n\tgetTakeMediaIcon() {\n\t\treturn 'camera';\n\t}\n\n\tgetWordPressLibraryIcon() {\n\t\treturn 'wordpress-alt';\n\t}\n\n\trender() {\n\t\tconst { mediaType } = this.props;\n\n\t\tconst onMediaLibraryButtonPressed = () => {\n\t\t\trequestMediaPickFromMediaLibrary( [ mediaType ], ( mediaId, mediaUrl ) => {\n\t\t\t\tif ( mediaId ) {\n\t\t\t\t\tthis.props.onSelectURL( mediaId, mediaUrl );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tconst onMediaUploadButtonPressed = () => {\n\t\t\trequestMediaPickFromDeviceLibrary( [ mediaType ], ( mediaId, mediaUrl ) => {\n\t\t\t\tif ( mediaId ) {\n\t\t\t\t\tthis.props.onSelectURL( mediaId, mediaUrl );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tconst onMediaCaptureButtonPressed = () => {\n\t\t\trequestMediaPickFromDeviceCamera( [ mediaType ], ( mediaId, mediaUrl ) => {\n\t\t\t\tif ( mediaId ) {\n\t\t\t\t\tthis.props.onSelectURL( mediaId, mediaUrl );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tconst mediaOptions = this.getMediaOptionsItems();\n\n\t\tlet picker;\n\n\t\tconst onPickerPresent = () => {\n\t\t\tpicker.presentPicker();\n\t\t};\n\n\t\tconst getMediaOptions = () => (\n\t\t\t<Picker\n\t\t\t\thideCancelButton={ true }\n\t\t\t\tref={ ( instance ) => picker = instance }\n\t\t\t\toptions={ mediaOptions }\n\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\tif ( value === MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_CHOOSE_FROM_DEVICE ) {\n\t\t\t\t\t\tonMediaUploadButtonPressed();\n\t\t\t\t\t} else if ( value === MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_TAKE_MEDIA ) {\n\t\t\t\t\t\tonMediaCaptureButtonPressed();\n\t\t\t\t\t} else if ( value === MEDIA_UPLOAD_BOTTOM_SHEET_VALUE_WORD_PRESS_LIBRARY ) {\n\t\t\t\t\t\tonMediaLibraryButtonPressed();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t\treturn this.props.render( { open: onPickerPresent, getMediaOptions } );\n\t}\n}\n\nexport default MediaUpload;\n"]}