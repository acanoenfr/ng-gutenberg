{"version":3,"sources":["@wordpress/block-editor/src/components/block-list-appender/index.js"],"names":["last","withSelect","getDefaultBlockName","IgnoreNestedEvents","DefaultBlockAppender","ButtonBlockAppender","BlockListAppender","blockClientIds","rootClientId","canInsertDefaultBlock","isLocked","CustomAppender","renderAppender","select","getBlockOrder","canInsertBlockType","getTemplateLock"],"mappings":";;AAAA;;;AAGA,SAASA,IAAT,QAAqB,QAArB;AAEA;;;;AAGA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,mBAAT,QAAoC,mBAApC;AAEA;;;;AAGA,OAAOC,kBAAP,MAA+B,yBAA/B;AACA,OAAOC,oBAAP,MAAiC,2BAAjC;AACA,OAAOC,mBAAP,MAAgC,0BAAhC;;AAEA,SAASC,iBAAT,OAMI;AAAA,MALHC,cAKG,QALHA,cAKG;AAAA,MAJHC,YAIG,QAJHA,YAIG;AAAA,MAHHC,qBAGG,QAHHA,qBAGG;AAAA,MAFHC,QAEG,QAFHA,QAEG;AAAA,MADaC,cACb,QADHC,cACG;;AACH,MAAKF,QAAL,EAAgB;AACf,WAAO,IAAP;AACA,GAHE,CAKH;AACA;;;AACA,MAAKC,cAAL,EAAsB;AACrB,WACC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC,cAAC,cAAD,OADD,CADD;AAKA,GAbE,CAeH;;;AACA,MAAKA,cAAc,KAAK,KAAxB,EAAgC;AAC/B,WAAO,IAAP;AACA,GAlBE,CAoBH;AACA;;;AACA,MAAKF,qBAAL,EAA6B;AAC5B,WACC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC,cAAC,kBAAD;AAAoB,MAAA,kBAAkB,EAAG,CAAE,SAAF,EAAa,SAAb,EAAwB,WAAxB;AAAzC,OACC,cAAC,oBAAD;AACC,MAAA,YAAY,EAAGD,YADhB;AAEC,MAAA,iBAAiB,EAAGR,IAAI,CAAEO,cAAF;AAFzB,MADD,CADD,CADD;AAUA,GAjCE,CAmCH;AACA;;;AACA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,cAAC,mBAAD;AACC,IAAA,YAAY,EAAGC,YADhB;AAEC,IAAA,SAAS,EAAC;AAFX,IADD,CADD;AAQA;;AAED,eAAeP,UAAU,CAAE,UAAEY,MAAF,SAAgC;AAAA,MAApBL,YAAoB,SAApBA,YAAoB;;AAAA,gBAKtDK,MAAM,CAAE,mBAAF,CALgD;AAAA,MAEzDC,aAFyD,WAEzDA,aAFyD;AAAA,MAGzDC,kBAHyD,WAGzDA,kBAHyD;AAAA,MAIzDC,eAJyD,WAIzDA,eAJyD;;AAO1D,SAAO;AACNN,IAAAA,QAAQ,EAAE,CAAC,CAAEM,eAAe,CAAER,YAAF,CADtB;AAEND,IAAAA,cAAc,EAAEO,aAAa,CAAEN,YAAF,CAFvB;AAGNC,IAAAA,qBAAqB,EAAEM,kBAAkB,CAAEb,mBAAmB,EAArB,EAAyBM,YAAzB;AAHnC,GAAP;AAKA,CAZwB,CAAV,CAYVF,iBAZU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport IgnoreNestedEvents from '../ignore-nested-events';\nimport DefaultBlockAppender from '../default-block-appender';\nimport ButtonBlockAppender from '../button-block-appender';\n\nfunction BlockListAppender( {\n\tblockClientIds,\n\trootClientId,\n\tcanInsertDefaultBlock,\n\tisLocked,\n\trenderAppender: CustomAppender,\n} ) {\n\tif ( isLocked ) {\n\t\treturn null;\n\t}\n\n\t// If a render prop has been provided\n\t// use it to render the appender.\n\tif ( CustomAppender ) {\n\t\treturn (\n\t\t\t<div className=\"block-list-appender\">\n\t\t\t\t<CustomAppender />\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// a false value means, don't render any appender.\n\tif ( CustomAppender === false ) {\n\t\treturn null;\n\t}\n\n\t// Render the default block appender when renderAppender has not been\n\t// provided and the context supports use of the default appender.\n\tif ( canInsertDefaultBlock ) {\n\t\treturn (\n\t\t\t<div className=\"block-list-appender\">\n\t\t\t\t<IgnoreNestedEvents childHandledEvents={ [ 'onFocus', 'onClick', 'onKeyDown' ] }>\n\t\t\t\t\t<DefaultBlockAppender\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tlastBlockClientId={ last( blockClientIds ) }\n\t\t\t\t\t/>\n\t\t\t\t</IgnoreNestedEvents>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Fallback in the case no renderAppender has been provided and the\n\t// default block can't be inserted.\n\treturn (\n\t\t<div className=\"block-list-appender\">\n\t\t\t<ButtonBlockAppender\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default withSelect( ( select, { rootClientId } ) => {\n\tconst {\n\t\tgetBlockOrder,\n\t\tcanInsertBlockType,\n\t\tgetTemplateLock,\n\t} = select( 'core/block-editor' );\n\n\treturn {\n\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\tblockClientIds: getBlockOrder( rootClientId ),\n\t\tcanInsertDefaultBlock: canInsertBlockType( getDefaultBlockName(), rootClientId ),\n\t};\n} )( BlockListAppender );\n"]}