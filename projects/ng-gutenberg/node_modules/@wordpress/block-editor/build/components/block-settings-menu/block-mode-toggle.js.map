{"version":3,"sources":["@wordpress/block-editor/src/components/block-settings-menu/block-mode-toggle.js"],"names":["BlockModeToggle","blockType","mode","onToggleMode","small","isCodeEditingEnabled","label","select","clientId","getBlock","getBlockMode","getSettings","block","codeEditingEnabled","name","dispatch","onToggle","noop","toggleBlockMode"],"mappings":";;;;;;;;;;AAGA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AAZA;;;;AAKA;;;AASO,SAASA,eAAT,OAA0G;AAAA,MAA9EC,SAA8E,QAA9EA,SAA8E;AAAA,MAAnEC,IAAmE,QAAnEA,IAAmE;AAAA,MAA7DC,YAA6D,QAA7DA,YAA6D;AAAA,wBAA/CC,KAA+C;AAAA,MAA/CA,KAA+C,2BAAvC,KAAuC;AAAA,mCAAhCC,oBAAgC;AAAA,MAAhCA,oBAAgC,sCAAT,IAAS;;AAChH,MAAK,CAAE,6BAAiBJ,SAAjB,EAA4B,MAA5B,EAAoC,IAApC,CAAF,IAAgD,CAAEI,oBAAvD,EAA8E;AAC7E,WAAO,IAAP;AACA;;AAED,MAAMC,KAAK,GAAGJ,IAAI,KAAK,QAAT,GACb,cAAI,cAAJ,CADa,GAEb,cAAI,eAAJ,CAFD;AAIA,SACC,4BAAC,oBAAD;AACC,IAAA,SAAS,EAAC,+EADX;AAEC,IAAA,OAAO,EAAGC,YAFX;AAGC,IAAA,IAAI,EAAC;AAHN,KAKG,CAAEC,KAAF,IAAWE,KALd,CADD;AASA;;eAEc,sBAAS,CACvB,sBAAY,UAAEC,MAAF,SAA4B;AAAA,MAAhBC,QAAgB,SAAhBA,QAAgB;;AAAA,gBACSD,MAAM,CAAE,mBAAF,CADf;AAAA,MAC/BE,QAD+B,WAC/BA,QAD+B;AAAA,MACrBC,YADqB,WACrBA,YADqB;AAAA,MACPC,WADO,WACPA,WADO;;AAEvC,MAAMC,KAAK,GAAGH,QAAQ,CAAED,QAAF,CAAtB;AACA,MAAMH,oBAAoB,GAAGM,WAAW,GAAGE,kBAA3C;AAEA,SAAO;AACNX,IAAAA,IAAI,EAAEQ,YAAY,CAAEF,QAAF,CADZ;AAENP,IAAAA,SAAS,EAAEW,KAAK,GAAG,0BAAcA,KAAK,CAACE,IAApB,CAAH,GAAgC,IAF1C;AAGNT,IAAAA,oBAAoB,EAApBA;AAHM,GAAP;AAKA,CAVD,CADuB,EAYvB,wBAAc,UAAEU,QAAF;AAAA,6BAAcC,QAAd;AAAA,MAAcA,QAAd,+BAAyBC,YAAzB;AAAA,MAA+BT,QAA/B,SAA+BA,QAA/B;AAAA,SAAiD;AAC9DL,IAAAA,YAD8D,0BAC/C;AACdY,MAAAA,QAAQ,CAAE,mBAAF,CAAR,CAAgCG,eAAhC,CAAiDV,QAAjD;AACAQ,MAAAA,QAAQ;AACR;AAJ6D,GAAjD;AAAA,CAAd,CAZuB,CAAT,EAkBVhB,eAlBU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nexport function BlockModeToggle( { blockType, mode, onToggleMode, small = false, isCodeEditingEnabled = true } ) {\n\tif ( ! hasBlockSupport( blockType, 'html', true ) || ! isCodeEditingEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst label = mode === 'visual' ?\n\t\t__( 'Edit as HTML' ) :\n\t\t__( 'Edit visually' );\n\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName=\"editor-block-settings-menu__control block-editor-block-settings-menu__control\"\n\t\t\tonClick={ onToggleMode }\n\t\t\ticon=\"html\"\n\t\t>\n\t\t\t{ ! small && label }\n\t\t</MenuItem>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock, getBlockMode, getSettings } = select( 'core/block-editor' );\n\t\tconst block = getBlock( clientId );\n\t\tconst isCodeEditingEnabled = getSettings().codeEditingEnabled;\n\n\t\treturn {\n\t\t\tmode: getBlockMode( clientId ),\n\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\tisCodeEditingEnabled,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { onToggle = noop, clientId } ) => ( {\n\t\tonToggleMode() {\n\t\t\tdispatch( 'core/block-editor' ).toggleBlockMode( clientId );\n\t\t\tonToggle();\n\t\t},\n\t} ) ),\n] )( BlockModeToggle );\n"]}