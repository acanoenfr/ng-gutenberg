{"version":3,"sources":["@wordpress/block-editor/src/components/contrast-checker/index.js"],"names":["ContrastCheckerMessage","tinyBackgroundColor","tinyTextColor","backgroundColor","textColor","msg","getBrightness","ContrastChecker","fallbackBackgroundColor","fallbackTextColor","fontSize","isLargeText","hasTransparency","getAlpha","tinycolor","isReadable","level","size"],"mappings":";;;;;;;;;AAWA;;AARA;;AAKA;;AACA;;AACA;;AAVA;;;;AAKA;;;AAQA,SAASA,sBAAT,OAAsG;AAAA,MAAnEC,mBAAmE,QAAnEA,mBAAmE;AAAA,MAA9CC,aAA8C,QAA9CA,aAA8C;AAAA,MAA/BC,eAA+B,QAA/BA,eAA+B;AAAA,MAAdC,SAAc,QAAdA,SAAc;AACrG,MAAMC,GAAG,GAAGJ,mBAAmB,CAACK,aAApB,KAAsCJ,aAAa,CAACI,aAAd,EAAtC,GACX,cAAI,0HAAJ,CADW,GAEX,cAAI,0HAAJ,CAFD;AAGA,0BAAW,YAAM;AAChB,qBAAO,cAAI,wDAAJ,CAAP;AACA,GAFD,EAEG,CAAEH,eAAF,EAAmBC,SAAnB,CAFH;AAGA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,kBAAD;AAAQ,IAAA,MAAM,EAAC,SAAf;AAAyB,IAAA,aAAa,EAAG;AAAzC,KACGC,GADH,CADD,CADD;AAOA;;AAED,SAASE,eAAT,QAOI;AAAA,MANHJ,eAMG,SANHA,eAMG;AAAA,MALHK,uBAKG,SALHA,uBAKG;AAAA,MAJHC,iBAIG,SAJHA,iBAIG;AAAA,MAHHC,QAGG,SAHHA,QAGG;AAAA,MAFHC,WAEG,SAFHA,WAEG;AAAA,MADHP,SACG,SADHA,SACG;;AACH,MAAK,EAAID,eAAe,IAAIK,uBAAvB,KAAoD,EAAIJ,SAAS,IAAIK,iBAAjB,CAAzD,EAAgG;AAC/F,WAAO,IAAP;AACA;;AACD,MAAMR,mBAAmB,GAAG,wBAAWE,eAAe,IAAIK,uBAA9B,CAA5B;AACA,MAAMN,aAAa,GAAG,wBAAWE,SAAS,IAAIK,iBAAxB,CAAtB;AACA,MAAMG,eAAe,GAAGX,mBAAmB,CAACY,QAApB,OAAmC,CAAnC,IAAwCX,aAAa,CAACW,QAAd,OAA6B,CAA7F;;AAEA,MAAKD,eAAe,IAAIE,mBAAUC,UAAV,CACvBd,mBADuB,EAEvBC,aAFuB,EAGvB;AAAEc,IAAAA,KAAK,EAAE,IAAT;AAAeC,IAAAA,IAAI,EAAIN,WAAW,IAAMA,WAAW,KAAK,KAAhB,IAAyBD,QAAQ,IAAI,EAAtD,GAA6D,OAA7D,GAAuE;AAA9F,GAHuB,CAAxB,EAII;AACH,WAAO,IAAP;AACA;;AAED,SACC,4BAAC,sBAAD;AACC,IAAA,eAAe,EAAGP,eADnB;AAEC,IAAA,SAAS,EAAGC,SAFb;AAGC,IAAA,mBAAmB,EAAGH,mBAHvB;AAIC,IAAA,aAAa,EAAGC;AAJjB,IADD;AAQA;;eAEcK,e","sourcesContent":["/**\n * External dependencies\n */\nimport tinycolor from 'tinycolor2';\n\n/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { __ } from '@wordpress/i18n';\nimport { Notice } from '@wordpress/components';\nimport { useEffect } from '@wordpress/element';\n\nfunction ContrastCheckerMessage( { tinyBackgroundColor, tinyTextColor, backgroundColor, textColor } ) {\n\tconst msg = tinyBackgroundColor.getBrightness() < tinyTextColor.getBrightness() ?\n\t\t__( 'This color combination may be hard for people to read. Try using a darker background color and/or a brighter text color.' ) :\n\t\t__( 'This color combination may be hard for people to read. Try using a brighter background color and/or a darker text color.' );\n\tuseEffect( () => {\n\t\tspeak( __( 'This color combination may be hard for people to read.' ) );\n\t}, [ backgroundColor, textColor ] );\n\treturn (\n\t\t<div className=\"editor-contrast-checker block-editor-contrast-checker\">\n\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t{ msg }\n\t\t\t</Notice>\n\t\t</div>\n\t);\n}\n\nfunction ContrastChecker( {\n\tbackgroundColor,\n\tfallbackBackgroundColor,\n\tfallbackTextColor,\n\tfontSize, // font size value in pixels\n\tisLargeText,\n\ttextColor,\n} ) {\n\tif ( ! ( backgroundColor || fallbackBackgroundColor ) || ! ( textColor || fallbackTextColor ) ) {\n\t\treturn null;\n\t}\n\tconst tinyBackgroundColor = tinycolor( backgroundColor || fallbackBackgroundColor );\n\tconst tinyTextColor = tinycolor( textColor || fallbackTextColor );\n\tconst hasTransparency = tinyBackgroundColor.getAlpha() !== 1 || tinyTextColor.getAlpha() !== 1;\n\n\tif ( hasTransparency || tinycolor.isReadable(\n\t\ttinyBackgroundColor,\n\t\ttinyTextColor,\n\t\t{ level: 'AA', size: ( isLargeText || ( isLargeText !== false && fontSize >= 24 ) ? 'large' : 'small' ) }\n\t) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ContrastCheckerMessage\n\t\t\tbackgroundColor={ backgroundColor }\n\t\t\ttextColor={ textColor }\n\t\t\ttinyBackgroundColor={ tinyBackgroundColor }\n\t\t\ttinyTextColor={ tinyTextColor }\n\t\t/>\n\t);\n}\n\nexport default ContrastChecker;\n"]}