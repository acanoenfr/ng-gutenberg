{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block.js"],"names":["preventDrag","event","preventDefault","BlockListBlock","blockRef","mode","isFocusMode","hasFixedToolbar","isLocked","clientId","rootClientId","isSelected","isPartOfMultiSelection","isFirstMultiSelected","isTypingWithinBlock","isCaretWithinFormattedText","isEmptyDefaultBlock","isMovable","isParentOfSelectedBlock","isDraggable","isSelectionEnabled","className","name","isValid","isLast","attributes","initialPosition","wrapperProps","setAttributes","onReplace","onInsertBlocksAfter","onMerge","onSelect","onRemove","onInsertDefaultBlockAfter","toggleSelection","onShiftSelection","onSelectionStart","animateOnChange","enableAnimation","isNavigationMode","enableNavigationMode","updateRerenderState","rerender","wrapper","current","blockNodeRef","breadcrumb","hadTouchStart","onTouchStart","onTouchStop","isBlockHovered","setBlockHoveredState","hideHoverEffects","maybeHover","isDragging","setBlockDraggingState","onDragStart","onDragEnd","hasError","setErrorState","onBlockError","isForcingContextualToolbar","forceFocusedContextualToolbar","focusTabbable","ignoreInnerBlocks","contains","document","activeElement","focus","textInputs","tabbable","find","filter","isTextField","node","isReverse","target","last","first","isMounting","animationStyle","onFocus","onKeyDown","keyCode","canUseShortcuts","isEditMode","ENTER","BACKSPACE","DELETE","ESCAPE","onPointerDown","button","shiftKey","selectOnOpen","open","isHovered","blockType","blockLabel","title","isUnregisteredBlock","showInserterShortcuts","showEmptyBlockSideInserter","shouldAppearSelected","shouldAppearHovered","shouldRenderMovers","shouldShowBreadcrumb","shouldShowContextualToolbar","shouldShowMobileToolbar","shouldShowInsertionPoint","wrapperClassName","getEditWrapperProps","blockElementId","blockEdit","undefined","display","animated","div","style","applyWithSelect","select","isLargeViewport","isBlockSelected","isAncestorMultiSelected","isBlockMultiSelected","isFirstMultiSelectedBlock","isTyping","getBlockMode","getSelectedBlocksInitialCaretPosition","getSettings","hasSelectedInnerBlock","getTemplateLock","getBlockIndex","getBlockOrder","__unstableGetBlockWithoutInnerBlocks","block","focusMode","isRTL","templateLock","index","blockOrder","length","applyWithDispatch","dispatch","ownProps","updateBlockAttributes","selectBlock","multiSelect","insertBlocks","insertDefaultBlock","removeBlock","mergeBlocks","replaceBlocks","setNavigationMode","__unstableMarkLastChangeAsPersistent","newAttributes","onInsertBlocks","blocks","forward","getPreviousBlockClientId","getNextBlockClientId","nextBlockClientId","previousBlockClientId","indexToSelect","getBlockSelectionStart","selectionEnabled","pure"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { first, last } from 'lodash';\nimport { animated } from 'react-spring/web.cjs';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useEffect, useLayoutEffect, useState } from '@wordpress/element';\nimport {\n\tfocus,\n\tisTextField,\n\tplaceCaretAtHorizontalEdge,\n} from '@wordpress/dom';\nimport { BACKSPACE, DELETE, ENTER, ESCAPE } from '@wordpress/keycodes';\nimport {\n\tgetBlockType,\n\tgetSaveElement,\n\tisReusableBlock,\n\tisUnmodifiedDefaultBlock,\n\tgetUnregisteredTypeHandlerName,\n} from '@wordpress/blocks';\nimport { KeyboardShortcuts, withFilters } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\twithDispatch,\n\twithSelect,\n} from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { compose, pure, ifCondition } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockMover from '../block-mover';\nimport BlockDropZone from '../block-drop-zone';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport BlockBreadcrumb from './breadcrumb';\nimport BlockContextualToolbar from './block-contextual-toolbar';\nimport BlockMultiControls from './multi-controls';\nimport BlockMobileToolbar from './block-mobile-toolbar';\nimport BlockInsertionPoint from './insertion-point';\nimport IgnoreNestedEvents from '../ignore-nested-events';\nimport InserterWithShortcuts from '../inserter-with-shortcuts';\nimport Inserter from '../inserter';\nimport { isInsideRootBlock } from '../../utils/dom';\nimport useMovingAnimation from './moving-animation';\n\n/**\n * Prevents default dragging behavior within a block to allow for multi-\n * selection to take effect unhampered.\n *\n * @param {DragEvent} event Drag event.\n */\nconst preventDrag = ( event ) => {\n\tevent.preventDefault();\n};\n\nfunction BlockListBlock( {\n\tblockRef,\n\tmode,\n\tisFocusMode,\n\thasFixedToolbar,\n\tisLocked,\n\tclientId,\n\trootClientId,\n\tisSelected,\n\tisPartOfMultiSelection,\n\tisFirstMultiSelected,\n\tisTypingWithinBlock,\n\tisCaretWithinFormattedText,\n\tisEmptyDefaultBlock,\n\tisMovable,\n\tisParentOfSelectedBlock,\n\tisDraggable,\n\tisSelectionEnabled,\n\tclassName,\n\tname,\n\tisValid,\n\tisLast,\n\tattributes,\n\tinitialPosition,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonInsertBlocksAfter,\n\tonMerge,\n\tonSelect,\n\tonRemove,\n\tonInsertDefaultBlockAfter,\n\ttoggleSelection,\n\tonShiftSelection,\n\tonSelectionStart,\n\tanimateOnChange,\n\tenableAnimation,\n\tisNavigationMode,\n\tenableNavigationMode,\n} ) {\n\t// Random state used to rerender the component if needed, ideally we don't need this\n\tconst [ , updateRerenderState ] = useState( {} );\n\tconst rerender = () => updateRerenderState( {} );\n\n\t// Reference of the wrapper\n\tconst wrapper = useRef( null );\n\tuseEffect( () => {\n\t\tblockRef( wrapper.current, clientId );\n\t}, [] );\n\n\t// Reference to the block edit node\n\tconst blockNodeRef = useRef();\n\n\tconst breadcrumb = useRef();\n\n\t// Keep track of touchstart to disable hover on iOS\n\tconst hadTouchStart = useRef( false );\n\tconst onTouchStart = () => {\n\t\thadTouchStart.current = true;\n\t};\n\tconst onTouchStop = () => {\n\t\t// Clear touchstart detection\n\t\t// Browser will try to emulate mouse events also see https://www.html5rocks.com/en/mobile/touchandmouse/\n\t\thadTouchStart.current = false;\n\t};\n\n\t// Handling isHovered\n\tconst [ isBlockHovered, setBlockHoveredState ] = useState( false );\n\n\t/**\n\t * Sets the block state as unhovered if currently hovering. There are cases\n\t * where mouseleave may occur but the block is not hovered (multi-select),\n\t * so to avoid unnecesary renders, the state is only set if hovered.\n\t */\n\tconst hideHoverEffects = () => {\n\t\tif ( isBlockHovered ) {\n\t\t\tsetBlockHoveredState( false );\n\t\t}\n\t};\n\t/**\n\t * A mouseover event handler to apply hover effect when a pointer device is\n\t * placed within the bounds of the block. The mouseover event is preferred\n\t * over mouseenter because it may be the case that a previous mouseenter\n\t * event was blocked from being handled by a IgnoreNestedEvents component,\n\t * therefore transitioning out of a nested block to the bounds of the block\n\t * would otherwise not trigger a hover effect.\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/Events/mouseenter\n\t */\n\tconst maybeHover = () => {\n\t\tif (\n\t\t\tisBlockHovered ||\n\t\t\tisPartOfMultiSelection ||\n\t\t\tisSelected ||\n\t\t\thadTouchStart.current\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tsetBlockHoveredState( true );\n\t};\n\n\t// Set hover to false once we start typing or select the block.\n\tuseEffect( () => {\n\t\tif ( isTypingWithinBlock || isSelected ) {\n\t\t\thideHoverEffects();\n\t\t}\n\t} );\n\n\t// Handling the dragging state\n\tconst [ isDragging, setBlockDraggingState ] = useState( false );\n\tconst onDragStart = () => {\n\t\tsetBlockDraggingState( true );\n\t};\n\tconst onDragEnd = () => {\n\t\tsetBlockDraggingState( false );\n\t};\n\n\t// Handling the error state\n\tconst [ hasError, setErrorState ] = useState( false );\n\tconst onBlockError = () => setErrorState( true );\n\n\t// Handling of forceContextualToolbarFocus\n\tconst isForcingContextualToolbar = useRef( false );\n\tuseEffect( () => {\n\t\tif ( isForcingContextualToolbar.current ) {\n\t\t\t// The forcing of contextual toolbar should only be true during one update,\n\t\t\t// after the first update normal conditions should apply.\n\t\t\tisForcingContextualToolbar.current = false;\n\t\t}\n\t} );\n\tconst forceFocusedContextualToolbar = () => {\n\t\tisForcingContextualToolbar.current = true;\n\t\t// trigger a re-render\n\t\trerender();\n\t};\n\n\t// Handing the focus of the block on creation and update\n\n\t/**\n\t * When a block becomes selected, transition focus to an inner tabbable.\n\t *\n\t * @param {boolean} ignoreInnerBlocks Should not focus inner blocks.\n\t */\n\tconst focusTabbable = ( ignoreInnerBlocks ) => {\n\t\t// Focus is captured by the wrapper node, so while focus transition\n\t\t// should only consider tabbables within editable display, since it\n\t\t// may be the wrapper itself or a side control which triggered the\n\t\t// focus event, don't unnecessary transition to an inner tabbable.\n\t\tif ( wrapper.current.contains( document.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isNavigationMode ) {\n\t\t\tbreadcrumb.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( blockNodeRef.current )\n\t\t\t.filter( isTextField )\n\t\t\t// Exclude inner blocks\n\t\t\t.filter( ( node ) => ! ignoreInnerBlocks || isInsideRootBlock( blockNodeRef.current, node ) );\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target = ( isReverse ? last : first )( textInputs );\n\n\t\tif ( ! target ) {\n\t\t\twrapper.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t};\n\n\t// Focus the selected block's wrapper or inner input on mount and update\n\tconst isMounting = useRef( true );\n\tuseEffect( () => {\n\t\tif ( isSelected ) {\n\t\t\tfocusTabbable( ! isMounting.current );\n\t\t}\n\t\tisMounting.current = false;\n\t}, [ isSelected ] );\n\n\t// Focus the first multi selected block\n\tuseEffect( () => {\n\t\tif ( isFirstMultiSelected ) {\n\t\t\twrapper.current.focus();\n\t\t}\n\t}, [ isFirstMultiSelected ] );\n\n\t// Block Reordering animation\n\tconst animationStyle = useMovingAnimation( wrapper, isSelected || isPartOfMultiSelection, isSelected || isFirstMultiSelected, enableAnimation, animateOnChange );\n\n\t// Focus the breadcrumb if the wrapper is focused on navigation mode.\n\t// Focus the first editable or the wrapper if edit mode.\n\tuseLayoutEffect( () => {\n\t\tif ( isSelected ) {\n\t\t\tif ( isNavigationMode ) {\n\t\t\t\tbreadcrumb.current.focus();\n\t\t\t} else {\n\t\t\t\tfocusTabbable( true );\n\t\t\t}\n\t\t}\n\t}, [ isSelected, isNavigationMode ] );\n\n\t// Other event handlers\n\n\t/**\n\t * Marks the block as selected when focused and not already selected. This\n\t * specifically handles the case where block does not set focus on its own\n\t * (via `setFocus`), typically if there is no focusable input in the block.\n\t */\n\tconst onFocus = () => {\n\t\tif ( ! isSelected && ! isPartOfMultiSelection ) {\n\t\t\tonSelect();\n\t\t}\n\t};\n\n\t/**\n\t * Interprets keydown event intent to remove or insert after block if key\n\t * event occurs on wrapper node. This can occur when the block has no text\n\t * fields of its own, particularly after initial insertion, to allow for\n\t * easy deletion and continuous writing flow to add additional content.\n\t *\n\t * @param {KeyboardEvent} event Keydown event.\n\t */\n\tconst onKeyDown = ( event ) => {\n\t\tconst { keyCode, target } = event;\n\n\t\t// ENTER/BACKSPACE Shortcuts are only available if the wrapper is focused\n\t\t// and the block is not locked.\n\t\tconst canUseShortcuts = (\n\t\t\tisSelected &&\n\t\t\t\t! isLocked &&\n\t\t\t\t( target === wrapper.current || target === breadcrumb.current )\n\t\t);\n\t\tconst isEditMode = ! isNavigationMode;\n\n\t\tswitch ( keyCode ) {\n\t\t\tcase ENTER:\n\t\t\t\tif ( canUseShortcuts && isEditMode ) {\n\t\t\t\t\t// Insert default block after current block if enter and event\n\t\t\t\t\t// not already handled by descendant.\n\t\t\t\t\tonInsertDefaultBlockAfter();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase BACKSPACE:\n\t\t\tcase DELETE:\n\t\t\t\tif ( canUseShortcuts ) {\n\t\t\t\t\t// Remove block on backspace.\n\t\t\t\t\tonRemove( clientId );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ESCAPE:\n\t\t\t\tif (\n\t\t\t\t\tisSelected &&\n\t\t\t\t\tisEditMode\n\t\t\t\t) {\n\t\t\t\t\tenableNavigationMode();\n\t\t\t\t\twrapper.current.focus();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * Begins tracking cursor multi-selection when clicking down within block.\n\t *\n\t * @param {MouseEvent} event A mousedown event.\n\t */\n\tconst onPointerDown = ( event ) => {\n\t\t// Not the main button.\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n\t\tif ( event.button !== 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.shiftKey ) {\n\t\t\tif ( ! isSelected ) {\n\t\t\t\tonShiftSelection();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t// Avoid triggering multi-selection if we click toolbars/inspectors\n\t\t// and all elements that are outside the Block Edit DOM tree.\n\t\t} else if ( blockNodeRef.current.contains( event.target ) ) {\n\t\t\tonSelectionStart( clientId );\n\n\t\t\t// Allow user to escape out of a multi-selection to a singular\n\t\t\t// selection of a block via click. This is handled here since\n\t\t\t// onFocus excludes blocks involved in a multiselection, as\n\t\t\t// focus can be incurred by starting a multiselection (focus\n\t\t\t// moved to first block's multi-controls).\n\t\t\tif ( isPartOfMultiSelection ) {\n\t\t\t\tonSelect();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst selectOnOpen = ( open ) => {\n\t\tif ( open && ! isSelected ) {\n\t\t\tonSelect();\n\t\t}\n\t};\n\n\t// Rendering the output\n\tconst isHovered = isBlockHovered && ! isPartOfMultiSelection;\n\tconst blockType = getBlockType( name );\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockType.title );\n\t// The block as rendered in the editor is composed of general block UI\n\t// (mover, toolbar, wrapper) and the display of the block content.\n\n\tconst isUnregisteredBlock = name === getUnregisteredTypeHandlerName();\n\n\t// If the block is selected and we're typing the block should not appear.\n\t// Empty paragraph blocks should always show up as unselected.\n\tconst showInserterShortcuts = ! isNavigationMode && ( isSelected || isHovered ) && isEmptyDefaultBlock && isValid;\n\tconst showEmptyBlockSideInserter = ! isNavigationMode && ( isSelected || isHovered || isLast ) && isEmptyDefaultBlock && isValid;\n\tconst shouldAppearSelected =\n\t\t! isFocusMode &&\n\t\t! showEmptyBlockSideInserter &&\n\t\tisSelected &&\n\t\t! isTypingWithinBlock;\n\tconst shouldAppearHovered =\n\t\t! isFocusMode &&\n\t\t! hasFixedToolbar &&\n\t\tisHovered &&\n\t\t! isEmptyDefaultBlock;\n\t// We render block movers and block settings to keep them tabbale even if hidden\n\tconst shouldRenderMovers =\n\t\t! isNavigationMode &&\n\t\tisSelected &&\n\t\t! showEmptyBlockSideInserter &&\n\t\t! isPartOfMultiSelection &&\n\t\t! isTypingWithinBlock;\n\tconst shouldShowBreadcrumb =\n\t\t( isSelected && isNavigationMode ) ||\n\t\t( ! isNavigationMode && ! isFocusMode && isHovered && ! isEmptyDefaultBlock );\n\tconst shouldShowContextualToolbar =\n\t\t! isNavigationMode &&\n\t\t! hasFixedToolbar &&\n\t\t! showEmptyBlockSideInserter &&\n\t\t(\n\t\t\t( isSelected && ( ! isTypingWithinBlock || isCaretWithinFormattedText ) ) ||\n\t\t\tisFirstMultiSelected\n\t\t);\n\tconst shouldShowMobileToolbar = ! isNavigationMode && shouldAppearSelected;\n\n\t// Insertion point can only be made visible if the block is at the\n\t// the extent of a multi-selection, or not in a multi-selection.\n\tconst shouldShowInsertionPoint =\n\t\t( isPartOfMultiSelection && isFirstMultiSelected ) ||\n\t\t! isPartOfMultiSelection;\n\n\t// The wp-block className is important for editor styles.\n\t// Generate the wrapper class names handling the different states of the block.\n\tconst wrapperClassName = classnames(\n\t\t'wp-block editor-block-list__block block-editor-block-list__block',\n\t\t{\n\t\t\t'has-warning': ! isValid || !! hasError || isUnregisteredBlock,\n\t\t\t'is-selected': shouldAppearSelected,\n\t\t\t'is-navigate-mode': isNavigationMode,\n\t\t\t'is-multi-selected': isPartOfMultiSelection,\n\t\t\t'is-hovered': shouldAppearHovered,\n\t\t\t'is-reusable': isReusableBlock( blockType ),\n\t\t\t'is-dragging': isDragging,\n\t\t\t'is-typing': isTypingWithinBlock,\n\t\t\t'is-focused': isFocusMode && ( isSelected || isParentOfSelectedBlock ),\n\t\t\t'is-focus-mode': isFocusMode,\n\t\t\t'has-child-selected': isParentOfSelectedBlock,\n\t\t},\n\t\tclassName\n\t);\n\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType.getEditWrapperProps ) {\n\t\twrapperProps = {\n\t\t\t...wrapperProps,\n\t\t\t...blockType.getEditWrapperProps( attributes ),\n\t\t};\n\t}\n\tconst blockElementId = `block-${ clientId }`;\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ isLocked ? undefined : onReplace }\n\t\t\tmergeBlocks={ isLocked ? undefined : onMerge }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t/>\n\t);\n\tif ( mode !== 'visual' ) {\n\t\tblockEdit = <div style={ { display: 'none' } }>{ blockEdit }</div>;\n\t}\n\n\treturn (\n\t\t<IgnoreNestedEvents\n\t\t\tid={ blockElementId }\n\t\t\tref={ wrapper }\n\t\t\tonMouseOver={ maybeHover }\n\t\t\tonMouseOverHandled={ hideHoverEffects }\n\t\t\tonMouseLeave={ hideHoverEffects }\n\t\t\tclassName={ wrapperClassName }\n\t\t\tdata-type={ name }\n\t\t\tonTouchStart={ onTouchStart }\n\t\t\tonFocus={ onFocus }\n\t\t\tonClick={ onTouchStop }\n\t\t\tonKeyDown={ onKeyDown }\n\t\t\ttabIndex=\"0\"\n\t\t\taria-label={ blockLabel }\n\t\t\tchildHandledEvents={ [ 'onDragStart', 'onMouseDown' ] }\n\t\t\ttagName={ animated.div }\n\t\t\t{ ...wrapperProps }\n\t\t\tstyle={\n\t\t\t\twrapperProps && wrapperProps.style ?\n\t\t\t\t\t{\n\t\t\t\t\t\t...wrapperProps.style,\n\t\t\t\t\t\t...animationStyle,\n\t\t\t\t\t} :\n\t\t\t\t\tanimationStyle\n\t\t\t}\n\t\t>\n\t\t\t{ shouldShowInsertionPoint && (\n\t\t\t\t<BlockInsertionPoint\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<BlockDropZone\n\t\t\t\tclientId={ clientId }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t/>\n\t\t\t{ isFirstMultiSelected && (\n\t\t\t\t<BlockMultiControls rootClientId={ rootClientId } />\n\t\t\t) }\n\t\t\t<div className=\"editor-block-list__block-edit block-editor-block-list__block-edit\">\n\t\t\t\t{ shouldRenderMovers && (\n\t\t\t\t\t<BlockMover\n\t\t\t\t\t\tclientIds={ clientId }\n\t\t\t\t\t\tblockElementId={ blockElementId }\n\t\t\t\t\t\tisHidden={ ! isSelected }\n\t\t\t\t\t\tisDraggable={\n\t\t\t\t\t\t\tisDraggable !== false &&\n\t\t\t\t\t\t\t( ! isPartOfMultiSelection && isMovable )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ shouldShowBreadcrumb && (\n\t\t\t\t\t<BlockBreadcrumb\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tref={ breadcrumb }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ( shouldShowContextualToolbar || isForcingContextualToolbar.current ) && (\n\t\t\t\t\t<BlockContextualToolbar\n\t\t\t\t\t\t// If the toolbar is being shown because of being forced\n\t\t\t\t\t\t// it should focus the toolbar right after the mount.\n\t\t\t\t\t\tfocusOnMount={ isForcingContextualToolbar.current }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{\n\t\t\t\t\t! isNavigationMode &&\n\t\t\t\t\t! shouldShowContextualToolbar &&\n\t\t\t\t\tisSelected &&\n\t\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t\t! isEmptyDefaultBlock && (\n\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\t\teventName=\"keydown\"\n\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t'alt+f10': forceFocusedContextualToolbar,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t<IgnoreNestedEvents\n\t\t\t\t\tref={ blockNodeRef }\n\t\t\t\t\tonDragStart={ preventDrag }\n\t\t\t\t\tonMouseDown={ onPointerDown }\n\t\t\t\t\tdata-block={ clientId }\n\t\t\t\t>\n\t\t\t\t\t<BlockCrashBoundary onError={ onBlockError }>\n\t\t\t\t\t\t{ isValid && blockEdit }\n\t\t\t\t\t\t{ isValid && mode === 'html' && (\n\t\t\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ! isValid && [\n\t\t\t\t\t\t\t<BlockInvalidWarning\n\t\t\t\t\t\t\t\tkey=\"invalid-warning\"\n\t\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t<div key=\"invalid-preview\">\n\t\t\t\t\t\t\t\t{ getSaveElement( blockType, attributes ) }\n\t\t\t\t\t\t\t</div>,\n\t\t\t\t\t\t] }\n\t\t\t\t\t</BlockCrashBoundary>\n\t\t\t\t\t{ !! hasError && <BlockCrashWarning /> }\n\t\t\t\t\t{ shouldShowMobileToolbar && (\n\t\t\t\t\t\t<BlockMobileToolbar clientId={ clientId } />\n\t\t\t\t\t) }\n\t\t\t\t</IgnoreNestedEvents>\n\t\t\t</div>\n\t\t\t{ showInserterShortcuts && (\n\t\t\t\t<div className=\"editor-block-list__side-inserter block-editor-block-list__side-inserter\">\n\t\t\t\t\t<InserterWithShortcuts\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tonToggle={ selectOnOpen }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ showEmptyBlockSideInserter && (\n\t\t\t\t<div className=\"editor-block-list__empty-block-inserter block-editor-block-list__empty-block-inserter\">\n\t\t\t\t\t<Inserter\n\t\t\t\t\t\tposition=\"top right\"\n\t\t\t\t\t\tonToggle={ selectOnOpen }\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</IgnoreNestedEvents>\n\t);\n}\n\nconst applyWithSelect = withSelect(\n\t( select, { clientId, rootClientId, isLargeViewport } ) => {\n\t\tconst {\n\t\t\tisBlockSelected,\n\t\t\tisAncestorMultiSelected,\n\t\t\tisBlockMultiSelected,\n\t\t\tisFirstMultiSelectedBlock,\n\t\t\tisTyping,\n\t\t\tisCaretWithinFormattedText,\n\t\t\tgetBlockMode,\n\t\t\tisSelectionEnabled,\n\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\tgetSettings,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetTemplateLock,\n\t\t\tgetBlockIndex,\n\t\t\tgetBlockOrder,\n\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\tisNavigationMode,\n\t\t} = select( 'core/block-editor' );\n\t\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst { hasFixedToolbar, focusMode, isRTL } = getSettings();\n\t\tconst templateLock = getTemplateLock( rootClientId );\n\t\tconst isParentOfSelectedBlock = hasSelectedInnerBlock( clientId, true );\n\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\tconst blockOrder = getBlockOrder( rootClientId );\n\n\t\t// The fallback to `{}` is a temporary fix.\n\t\t// This function should never be called when a block is not present in the state.\n\t\t// It happens now because the order in withSelect rendering is not correct.\n\t\tconst { name, attributes, isValid } = block || {};\n\n\t\treturn {\n\t\t\tisPartOfMultiSelection:\n\t\t\t\tisBlockMultiSelected( clientId ) || isAncestorMultiSelected( clientId ),\n\t\t\tisFirstMultiSelected: isFirstMultiSelectedBlock( clientId ),\n\t\t\t// We only care about this prop when the block is selected\n\t\t\t// Thus to avoid unnecessary rerenders we avoid updating the prop if the block is not selected.\n\t\t\tisTypingWithinBlock:\n\t\t\t\t( isSelected || isParentOfSelectedBlock ) && isTyping(),\n\t\t\tisCaretWithinFormattedText: isCaretWithinFormattedText(),\n\t\t\tmode: getBlockMode( clientId ),\n\t\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\t\tinitialPosition: isSelected ? getSelectedBlocksInitialCaretPosition() : null,\n\t\t\tisEmptyDefaultBlock:\n\t\t\t\tname && isUnmodifiedDefaultBlock( { name, attributes } ),\n\t\t\tisMovable: 'all' !== templateLock,\n\t\t\tisLocked: !! templateLock,\n\t\t\tisFocusMode: focusMode && isLargeViewport,\n\t\t\thasFixedToolbar: hasFixedToolbar && isLargeViewport,\n\t\t\tisLast: index === blockOrder.length - 1,\n\t\t\tisNavigationMode: isNavigationMode(),\n\t\t\tisRTL,\n\n\t\t\t// Users of the editor.BlockListBlock filter used to be able to access the block prop\n\t\t\t// Ideally these blocks would rely on the clientId prop only.\n\t\t\t// This is kept for backward compatibility reasons.\n\t\t\tblock,\n\n\t\t\tname,\n\t\t\tattributes,\n\t\t\tisValid,\n\t\t\tisSelected,\n\t\t\tisParentOfSelectedBlock,\n\t\t};\n\t}\n);\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, { select } ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tselectBlock,\n\t\tmultiSelect,\n\t\tinsertBlocks,\n\t\tinsertDefaultBlock,\n\t\tremoveBlock,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\tsetNavigationMode,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t} = dispatch( 'core/block-editor' );\n\n\treturn {\n\t\tsetAttributes( newAttributes ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tupdateBlockAttributes( clientId, newAttributes );\n\t\t},\n\t\tonSelect( clientId = ownProps.clientId, initialPosition ) {\n\t\t\tselectBlock( clientId, initialPosition );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertDefaultBlockAfter() {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst {\n\t\t\t\tgetBlockIndex,\n\t\t\t} = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertDefaultBlock( {}, rootClientId, index + 1 );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst {\n\t\t\t\tgetBlockIndex,\n\t\t\t} = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonRemove( clientId ) {\n\t\t\tremoveBlock( clientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst {\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetNextBlockClientId,\n\t\t\t} = select( 'core/block-editor' );\n\n\t\t\tif ( forward ) {\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId = getPreviousBlockClientId( clientId );\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\treplaceBlocks( [ ownProps.clientId ], blocks, indexToSelect );\n\t\t},\n\t\tonShiftSelection() {\n\t\t\tif ( ! ownProps.isSelectionEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tgetBlockSelectionStart,\n\t\t\t} = select( 'core/block-editor' );\n\n\t\t\tif ( getBlockSelectionStart() ) {\n\t\t\t\tmultiSelect( getBlockSelectionStart(), ownProps.clientId );\n\t\t\t} else {\n\t\t\t\tselectBlock( ownProps.clientId );\n\t\t\t}\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t\tenableNavigationMode() {\n\t\t\tsetNavigationMode( true );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\tpure,\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\t// block is sometimes not mounted at the right time, causing it be undefined\n\t// see issue for more info https://github.com/WordPress/gutenberg/issues/17013\n\tifCondition( ( { block } ) => !! block ),\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n"]}