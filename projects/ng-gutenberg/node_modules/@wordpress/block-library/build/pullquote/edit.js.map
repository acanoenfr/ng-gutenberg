{"version":3,"sources":["@wordpress/block-library/src/pullquote/edit.js"],"names":["PullQuoteEdit","props","wasTextColorAutomaticallyComputed","pullQuoteMainColorSetter","bind","pullQuoteTextColorSetter","colorValue","colorUtils","textColor","setTextColor","setMainColor","className","isSolidColorStyle","SOLID_COLOR_CLASS","needTextColor","color","shouldSetTextColor","getMostReadableColor","attributes","mainColor","setAttributes","isSelected","value","citation","figureStyles","backgroundColor","borderColor","figureClasses","class","blockquoteStyles","blockquoteClasses","nextValue","RichText","isEmpty","nextCitation","onChange","label","Component"],"mappings":";;;;;;;;;AAUA;;;;;;;;;;;;;;;;;;AAPA;;AACA;;AAKA;;AAEA;;AAWA;;AAtBA;;;;AAMA;;;;AAaA;;;IAKMA,a;;;;;AACL,yBAAaC,KAAb,EAAqB;AAAA;;AAAA;AACpB,mHAAOA,KAAP;AAEA,UAAKC,iCAAL,GAAyC,KAAzC;AACA,UAAKC,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BC,IAA9B,6CAAhC;AACA,UAAKC,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BD,IAA9B,6CAAhC;AALoB;AAMpB;;;;6CAEyBE,U,EAAa;AAAA,wBACmC,KAAKL,KADxC;AAAA,UAC9BM,UAD8B,eAC9BA,UAD8B;AAAA,UAClBC,SADkB,eAClBA,SADkB;AAAA,UACPC,YADO,eACPA,YADO;AAAA,UACOC,YADP,eACOA,YADP;AAAA,UACqBC,SADrB,eACqBA,SADrB;AAEtC,UAAMC,iBAAiB,GAAG,sBAAUD,SAAV,EAAqBE,yBAArB,CAA1B;AACA,UAAMC,aAAa,GAAG,CAAEN,SAAS,CAACO,KAAZ,IAAqB,KAAKb,iCAAhD;AACA,UAAMc,kBAAkB,GAAGJ,iBAAiB,IAAIE,aAArB,IAAsCR,UAAjE;AAEAI,MAAAA,YAAY,CAAEJ,UAAF,CAAZ;;AACA,UAAKU,kBAAL,EAA0B;AACzB,aAAKd,iCAAL,GAAyC,IAAzC;AACAO,QAAAA,YAAY,CAAEF,UAAU,CAACU,oBAAX,CAAiCX,UAAjC,CAAF,CAAZ;AACA;AACD;;;6CAEyBA,U,EAAa;AAAA,UAC9BG,YAD8B,GACb,KAAKR,KADQ,CAC9BQ,YAD8B;AAEtCA,MAAAA,YAAY,CAAEH,UAAF,CAAZ;AACA,WAAKJ,iCAAL,GAAyC,KAAzC;AACA;;;6BAEQ;AAAA,yBAQJ,KAAKD,KARD;AAAA,UAEPiB,UAFO,gBAEPA,UAFO;AAAA,UAGPC,SAHO,gBAGPA,SAHO;AAAA,UAIPX,SAJO,gBAIPA,SAJO;AAAA,UAKPY,aALO,gBAKPA,aALO;AAAA,UAMPC,UANO,gBAMPA,UANO;AAAA,UAOPV,SAPO,gBAOPA,SAPO;AAAA,UAUAW,KAVA,GAUoBJ,UAVpB,CAUAI,KAVA;AAAA,UAUOC,QAVP,GAUoBL,UAVpB,CAUOK,QAVP;AAYR,UAAMX,iBAAiB,GAAG,sBAAUD,SAAV,EAAqBE,yBAArB,CAA1B;AACA,UAAMW,YAAY,GAAGZ,iBAAiB,GACrC;AAAEa,QAAAA,eAAe,EAAEN,SAAS,CAACJ;AAA7B,OADqC,GAErC;AAAEW,QAAAA,WAAW,EAAEP,SAAS,CAACJ;AAAzB,OAFD;AAIA,UAAMY,aAAa,GAAG,0BAAYhB,SAAZ;AACrB,0BAAkBC,iBAAiB,IAAIO,SAAS,CAACJ;AAD5B,SAEnBI,SAAS,CAACS,KAFS,EAEAhB,iBAAiB,IAAIO,SAAS,CAACS,KAF/B,EAAtB;AAKA,UAAMC,gBAAgB,GAAG;AACxBd,QAAAA,KAAK,EAAEP,SAAS,CAACO;AADO,OAAzB;AAIA,UAAMe,iBAAiB,GAAGtB,SAAS,CAACO,KAAV,IAAmB,0BAC5C,gBAD4C,oCAExCP,SAAS,CAACoB,KAF8B,EAErBpB,SAAS,CAACoB,KAFW,EAA7C;AAKA,aACC,qDACC;AAAQ,QAAA,KAAK,EAAGJ,YAAhB;AAA+B,QAAA,SAAS,EAAGG;AAA3C,SACC;AAAY,QAAA,KAAK,EAAGE,gBAApB;AAAuC,QAAA,SAAS,EAAGC;AAAnD,SACC,4BAAC,qBAAD;AACC,QAAA,SAAS,MADV;AAEC,QAAA,KAAK,EAAGR,KAFT;AAGC,QAAA,QAAQ,EACP,kBAAES,SAAF;AAAA,iBAAiBX,aAAa,CAAE;AAC/BE,YAAAA,KAAK,EAAES;AADwB,WAAF,CAA9B;AAAA,SAJF;AAQC,QAAA,WAAW,EACV;AACA,sBAAI,cAAJ,CAVF;AAYC,QAAA,gBAAgB,EAAC;AAZlB,QADD,EAeG,CAAE,CAAEC,sBAASC,OAAT,CAAkBV,QAAlB,CAAF,IAAkCF,UAApC,KACD,4BAAC,qBAAD;AACC,QAAA,KAAK,EAAGE,QADT;AAEC,QAAA,WAAW,EACV;AACA,sBAAI,iBAAJ,CAJF;AAMC,QAAA,QAAQ,EACP,kBAAEW,YAAF;AAAA,iBAAoBd,aAAa,CAAE;AAClCG,YAAAA,QAAQ,EAAEW;AADwB,WAAF,CAAjC;AAAA,SAPF;AAWC,QAAA,SAAS,EAAC;AAXX,QAhBF,CADD,CADD,EAkCC,4BAAC,8BAAD,QACC,4BAAC,+BAAD;AACC,QAAA,KAAK,EAAG,cAAI,gBAAJ,CADT;AAEC,QAAA,aAAa,EAAG,CACf;AACCZ,UAAAA,KAAK,EAAEH,SAAS,CAACJ,KADlB;AAECoB,UAAAA,QAAQ,EAAE,KAAKhC,wBAFhB;AAGCiC,UAAAA,KAAK,EAAE,cAAI,YAAJ;AAHR,SADe,EAMf;AACCd,UAAAA,KAAK,EAAEd,SAAS,CAACO,KADlB;AAECoB,UAAAA,QAAQ,EAAE,KAAK9B,wBAFhB;AAGC+B,UAAAA,KAAK,EAAE,cAAI,YAAJ;AAHR,SANe;AAFjB,SAeGxB,iBAAiB,IAClB,4BAAC,4BAAD,yBACM;AACJJ,QAAAA,SAAS,EAAEA,SAAS,CAACO,KADjB;AAEJU,QAAAA,eAAe,EAAEN,SAAS,CAACJ;AAFvB,OADN;AAKC,QAAA,WAAW,EAAG;AALf,SAhBF,CADD,CAlCD,CADD;AAgEA;;;EA3H0BsB,kB;;eA8Hb,6BAAY;AAAElB,EAAAA,SAAS,EAAE,kBAAb;AAAiCX,EAAAA,SAAS,EAAE;AAA5C,CAAZ,EACdR,aADc,C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport {\n\tRichText,\n\tContrastChecker,\n\tInspectorControls,\n\twithColors,\n\tPanelColorSettings,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { SOLID_COLOR_CLASS } from './shared';\n\nclass PullQuoteEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.wasTextColorAutomaticallyComputed = false;\n\t\tthis.pullQuoteMainColorSetter = this.pullQuoteMainColorSetter.bind( this );\n\t\tthis.pullQuoteTextColorSetter = this.pullQuoteTextColorSetter.bind( this );\n\t}\n\n\tpullQuoteMainColorSetter( colorValue ) {\n\t\tconst { colorUtils, textColor, setTextColor, setMainColor, className } = this.props;\n\t\tconst isSolidColorStyle = includes( className, SOLID_COLOR_CLASS );\n\t\tconst needTextColor = ! textColor.color || this.wasTextColorAutomaticallyComputed;\n\t\tconst shouldSetTextColor = isSolidColorStyle && needTextColor && colorValue;\n\n\t\tsetMainColor( colorValue );\n\t\tif ( shouldSetTextColor ) {\n\t\t\tthis.wasTextColorAutomaticallyComputed = true;\n\t\t\tsetTextColor( colorUtils.getMostReadableColor( colorValue ) );\n\t\t}\n\t}\n\n\tpullQuoteTextColorSetter( colorValue ) {\n\t\tconst { setTextColor } = this.props;\n\t\tsetTextColor( colorValue );\n\t\tthis.wasTextColorAutomaticallyComputed = false;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tmainColor,\n\t\t\ttextColor,\n\t\t\tsetAttributes,\n\t\t\tisSelected,\n\t\t\tclassName,\n\t\t} = this.props;\n\n\t\tconst { value, citation } = attributes;\n\n\t\tconst isSolidColorStyle = includes( className, SOLID_COLOR_CLASS );\n\t\tconst figureStyles = isSolidColorStyle ?\n\t\t\t{ backgroundColor: mainColor.color } :\n\t\t\t{ borderColor: mainColor.color };\n\n\t\tconst figureClasses = classnames( className, {\n\t\t\t'has-background': isSolidColorStyle && mainColor.color,\n\t\t\t[ mainColor.class ]: isSolidColorStyle && mainColor.class,\n\t\t} );\n\n\t\tconst blockquoteStyles = {\n\t\t\tcolor: textColor.color,\n\t\t};\n\n\t\tconst blockquoteClasses = textColor.color && classnames(\n\t\t\t'has-text-color',\n\t\t\t{ [ textColor.class ]: textColor.class }\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<figure style={ figureStyles } className={ figureClasses }>\n\t\t\t\t\t<blockquote style={ blockquoteStyles } className={ blockquoteClasses }>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t( nextValue ) => setAttributes( {\n\t\t\t\t\t\t\t\t\tvalue: nextValue,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t// translators: placeholder text used for the quote\n\t\t\t\t\t\t\t\t__( 'Write quote…' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twrapperClassName=\"block-library-pullquote__content\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ( ! RichText.isEmpty( citation ) || isSelected ) && (\n\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\tvalue={ citation }\n\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t// translators: placeholder text used for the citation\n\t\t\t\t\t\t\t\t\t__( 'Write citation…' )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t( nextCitation ) => setAttributes( {\n\t\t\t\t\t\t\t\t\t\tcitation: nextCitation,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"wp-block-pullquote__citation\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</blockquote>\n\t\t\t\t</figure>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color Settings' ) }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: mainColor.color,\n\t\t\t\t\t\t\t\tonChange: this.pullQuoteMainColorSetter,\n\t\t\t\t\t\t\t\tlabel: __( 'Main Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: this.pullQuoteTextColorSetter,\n\t\t\t\t\t\t\t\tlabel: __( 'Text Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isSolidColorStyle && (\n\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\ttextColor: textColor.color,\n\t\t\t\t\t\t\t\t\tbackgroundColor: mainColor.color,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tisLargeText={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t</InspectorControls>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default withColors( { mainColor: 'background-color', textColor: 'color' } )(\n\tPullQuoteEdit\n);\n"]}