{"version":3,"sources":["@wordpress/block-library/src/button/edit.js"],"names":["window","getComputedStyle","applyFallbackStyles","node","ownProps","textColor","backgroundColor","backgroundColorValue","color","textColorValue","textNode","querySelector","fallbackBackgroundColor","undefined","fallbackTextColor","NEW_TAB_REL","MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUE","INITIAL_BORDER_RADIUS_POSITION","BorderPanel","borderRadius","setAttributes","setBorderRadius","newBorderRadius","ButtonEdit","arguments","nodeRef","bindRef","bind","onSetLinkRel","onToggleOpenInNewTab","value","props","rel","attributes","linkTarget","updatedRel","setBackgroundColor","setTextColor","className","instanceId","isSelected","placeholder","text","title","url","linkId","class","onChange","label","isLargeText","Component","withInstanceId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tComponent,\n\tuseCallback,\n} from '@wordpress/element';\nimport {\n\tcompose,\n\twithInstanceId,\n} from '@wordpress/compose';\nimport {\n\tBaseControl,\n\tPanelBody,\n\tRangeControl,\n\tTextControl,\n\tToggleControl,\n\twithFallbackStyles,\n} from '@wordpress/components';\nimport {\n\tURLInput,\n\tRichText,\n\tContrastChecker,\n\tInspectorControls,\n\twithColors,\n\tPanelColorSettings,\n} from '@wordpress/block-editor';\n\nconst { getComputedStyle } = window;\n\nconst applyFallbackStyles = withFallbackStyles( ( node, ownProps ) => {\n\tconst { textColor, backgroundColor } = ownProps;\n\tconst backgroundColorValue = backgroundColor && backgroundColor.color;\n\tconst textColorValue = textColor && textColor.color;\n\t//avoid the use of querySelector if textColor color is known and verify if node is available.\n\tconst textNode = ! textColorValue && node ? node.querySelector( '[contenteditable=\"true\"]' ) : null;\n\treturn {\n\t\tfallbackBackgroundColor: backgroundColorValue || ! node ? undefined : getComputedStyle( node ).backgroundColor,\n\t\tfallbackTextColor: textColorValue || ! textNode ? undefined : getComputedStyle( textNode ).color,\n\t};\n} );\n\nconst NEW_TAB_REL = 'noreferrer noopener';\nconst MIN_BORDER_RADIUS_VALUE = 0;\nconst MAX_BORDER_RADIUS_VALUE = 50;\nconst INITIAL_BORDER_RADIUS_POSITION = 5;\n\nfunction BorderPanel( { borderRadius = '', setAttributes } ) {\n\tconst setBorderRadius = useCallback(\n\t\t( newBorderRadius ) => {\n\t\t\tsetAttributes( { borderRadius: newBorderRadius } );\n\t\t},\n\t\t[ setAttributes ]\n\t);\n\treturn (\n\t\t<PanelBody title={ __( 'Border Settings' ) }>\n\t\t\t<RangeControl\n\t\t\t\tvalue={ borderRadius }\n\t\t\t\tlabel={ __( 'Border Radius' ) }\n\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\tmax={ MAX_BORDER_RADIUS_VALUE }\n\t\t\t\tinitialPosition={ INITIAL_BORDER_RADIUS_POSITION }\n\t\t\t\tallowReset\n\t\t\t\tonChange={ setBorderRadius }\n\t\t\t/>\n\t\t</PanelBody>\n\t);\n}\n\nclass ButtonEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.nodeRef = null;\n\t\tthis.bindRef = this.bindRef.bind( this );\n\t\tthis.onSetLinkRel = this.onSetLinkRel.bind( this );\n\t\tthis.onToggleOpenInNewTab = this.onToggleOpenInNewTab.bind( this );\n\t}\n\n\tbindRef( node ) {\n\t\tif ( ! node ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.nodeRef = node;\n\t}\n\n\tonSetLinkRel( value ) {\n\t\tthis.props.setAttributes( { rel: value } );\n\t}\n\n\tonToggleOpenInNewTab( value ) {\n\t\tconst { rel } = this.props.attributes;\n\t\tconst linkTarget = value ? '_blank' : undefined;\n\n\t\tlet updatedRel = rel;\n\t\tif ( linkTarget && ! rel ) {\n\t\t\tupdatedRel = NEW_TAB_REL;\n\t\t} else if ( ! linkTarget && rel === NEW_TAB_REL ) {\n\t\t\tupdatedRel = undefined;\n\t\t}\n\n\t\tthis.props.setAttributes( {\n\t\t\tlinkTarget,\n\t\t\trel: updatedRel,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tbackgroundColor,\n\t\t\ttextColor,\n\t\t\tsetBackgroundColor,\n\t\t\tsetTextColor,\n\t\t\tfallbackBackgroundColor,\n\t\t\tfallbackTextColor,\n\t\t\tsetAttributes,\n\t\t\tclassName,\n\t\t\tinstanceId,\n\t\t\tisSelected,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tborderRadius,\n\t\t\tlinkTarget,\n\t\t\tplaceholder,\n\t\t\trel,\n\t\t\ttext,\n\t\t\ttitle,\n\t\t\turl,\n\t\t} = attributes;\n\n\t\tconst linkId = `wp-block-button__inline-link-${ instanceId }`;\n\n\t\treturn (\n\t\t\t<div className={ className } title={ title } ref={ this.bindRef }>\n\t\t\t\t<RichText\n\t\t\t\t\tplaceholder={ placeholder || __( 'Add textâ€¦' ) }\n\t\t\t\t\tvalue={ text }\n\t\t\t\t\tonChange={ ( value ) => setAttributes( { text: value } ) }\n\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'wp-block-button__link', {\n\t\t\t\t\t\t\t'has-background': backgroundColor.color,\n\t\t\t\t\t\t\t[ backgroundColor.class ]: backgroundColor.class,\n\t\t\t\t\t\t\t'has-text-color': textColor.color,\n\t\t\t\t\t\t\t[ textColor.class ]: textColor.class,\n\t\t\t\t\t\t\t'no-border-radius': borderRadius === 0,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tbackgroundColor: backgroundColor.color,\n\t\t\t\t\t\tcolor: textColor.color,\n\t\t\t\t\t\tborderRadius: borderRadius ? borderRadius + 'px' : undefined,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<BaseControl\n\t\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\t\tclassName=\"wp-block-button__inline-link\"\n\t\t\t\t\tid={ linkId }>\n\t\t\t\t\t<URLInput\n\t\t\t\t\t\tclassName=\"wp-block-button__inline-link-input\"\n\t\t\t\t\t\tvalue={ url }\n\t\t\t\t\t\t/* eslint-disable jsx-a11y/no-autofocus */\n\t\t\t\t\t\t// Disable Reason: The rule is meant to prevent enabling auto-focus, not disabling it.\n\t\t\t\t\t\tautoFocus={ false }\n\t\t\t\t\t\t/* eslint-enable jsx-a11y/no-autofocus */\n\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { url: value } ) }\n\t\t\t\t\t\tdisableSuggestions={ ! isSelected }\n\t\t\t\t\t\tid={ linkId }\n\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\thasBorder\n\t\t\t\t\t/>\n\t\t\t\t</BaseControl>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color Settings' ) }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: backgroundColor.color,\n\t\t\t\t\t\t\t\tonChange: setBackgroundColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Background Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: setTextColor,\n\t\t\t\t\t\t\t\tlabel: __( 'Text Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t// Text is considered large if font size is greater or equal to 18pt or 24px,\n\t\t\t\t\t\t\t\t// currently that's not the case for button.\n\t\t\t\t\t\t\t\tisLargeText: false,\n\t\t\t\t\t\t\t\ttextColor: textColor.color,\n\t\t\t\t\t\t\t\tbackgroundColor: backgroundColor.color,\n\t\t\t\t\t\t\t\tfallbackBackgroundColor,\n\t\t\t\t\t\t\t\tfallbackTextColor,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t\t<BorderPanel\n\t\t\t\t\t\tborderRadius={ borderRadius }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t\t<PanelBody title={ __( 'Link settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\tonChange={ this.onToggleOpenInNewTab }\n\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\t\t\t\tvalue={ rel || '' }\n\t\t\t\t\t\t\tonChange={ this.onSetLinkRel }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithInstanceId,\n\twithColors( 'backgroundColor', { textColor: 'color' } ),\n\tapplyFallbackStyles,\n] )( ButtonEdit );\n"]}