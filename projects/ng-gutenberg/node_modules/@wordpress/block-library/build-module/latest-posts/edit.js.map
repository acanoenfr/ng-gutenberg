{"version":3,"sources":["@wordpress/block-library/src/latest-posts/edit.js"],"names":["isUndefined","pickBy","classnames","Component","RawHTML","PanelBody","Placeholder","QueryControls","RangeControl","Spinner","ToggleControl","Toolbar","RadioControl","apiFetch","addQueryArgs","__","dateI18n","format","__experimentalGetSettings","InspectorControls","BlockControls","withSelect","CATEGORIES_LIST_QUERY","per_page","MAX_POSTS_COLUMNS","LatestPostsEdit","arguments","state","categoriesList","isStillMounted","fetchRequest","path","then","setState","catch","props","attributes","setAttributes","latestPosts","displayPostContentRadio","displayPostContent","displayPostDate","postLayout","columns","order","orderBy","categories","postsToShow","excerptLength","inspectorControls","value","label","undefined","hasPosts","Math","min","length","Array","isArray","displayPosts","slice","layoutControls","icon","title","onClick","isActive","dateFormat","formats","date","className","map","post","i","titleTrimmed","rendered","trim","excerpt","raw","content","excerptElement","document","createElement","innerHTML","textContent","innerText","link","date_gmt","split","join","select","getEntityRecords","latestPostsQuery","orderby"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isUndefined, pickBy } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, RawHTML } from '@wordpress/element';\nimport {\n\tPanelBody,\n\tPlaceholder,\n\tQueryControls,\n\tRangeControl,\n\tSpinner,\n\tToggleControl,\n\tToolbar,\n\tRadioControl,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __ } from '@wordpress/i18n';\nimport { dateI18n, format, __experimentalGetSettings } from '@wordpress/date';\nimport {\n\tInspectorControls,\n\tBlockControls,\n} from '@wordpress/block-editor';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Module Constants\n */\nconst CATEGORIES_LIST_QUERY = {\n\tper_page: -1,\n};\nconst MAX_POSTS_COLUMNS = 6;\n\nclass LatestPostsEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tcategoriesList: [],\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.isStillMounted = true;\n\t\tthis.fetchRequest = apiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/categories`, CATEGORIES_LIST_QUERY ),\n\t\t} ).then(\n\t\t\t( categoriesList ) => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList } );\n\t\t\t\t}\n\t\t\t}\n\t\t).catch(\n\t\t\t() => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList: [] } );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.isStillMounted = false;\n\t}\n\n\trender() {\n\t\tconst { attributes, setAttributes, latestPosts } = this.props;\n\t\tconst { categoriesList } = this.state;\n\t\tconst { displayPostContentRadio, displayPostContent, displayPostDate, postLayout, columns, order, orderBy, categories, postsToShow, excerptLength } = attributes;\n\n\t\tconst inspectorControls = (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Post Content Settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Post Content' ) }\n\t\t\t\t\t\tchecked={ displayPostContent }\n\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { displayPostContent: value } ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t<RadioControl\n\t\t\t\t\t\tlabel=\"Show:\"\n\t\t\t\t\t\tselected={ displayPostContentRadio }\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t{ label: 'Excerpt', value: 'excerpt' },\n\t\t\t\t\t\t\t{ label: 'Full Post', value: 'full_post' },\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { displayPostContentRadio: value } ) }\n\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{ displayPostContent && displayPostContentRadio === 'excerpt' &&\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Max number of words in excerpt' ) }\n\t\t\t\t\t\t\tvalue={ excerptLength }\n\t\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { excerptLength: value } ) }\n\t\t\t\t\t\t\tmin={ 10 }\n\t\t\t\t\t\t\tmax={ 100 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Post Meta Settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display post date' ) }\n\t\t\t\t\t\tchecked={ displayPostDate }\n\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { displayPostDate: value } ) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Sorting and Filtering' ) }>\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\t\tnumberOfItems={ postsToShow }\n\t\t\t\t\t\tcategoriesList={ categoriesList }\n\t\t\t\t\t\tselectedCategoryId={ categories }\n\t\t\t\t\t\tonOrderChange={ ( value ) => setAttributes( { order: value } ) }\n\t\t\t\t\t\tonOrderByChange={ ( value ) => setAttributes( { orderBy: value } ) }\n\t\t\t\t\t\tonCategoryChange={ ( value ) => setAttributes( { categories: '' !== value ? value : undefined } ) }\n\t\t\t\t\t\tonNumberOfItemsChange={ ( value ) => setAttributes( { postsToShow: value } ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ postLayout === 'grid' &&\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\tvalue={ columns }\n\t\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { columns: value } ) }\n\t\t\t\t\t\t\tmin={ 2 }\n\t\t\t\t\t\t\tmax={ ! hasPosts ? MAX_POSTS_COLUMNS : Math.min( MAX_POSTS_COLUMNS, latestPosts.length ) }\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\n\t\tconst hasPosts = Array.isArray( latestPosts ) && latestPosts.length;\n\t\tif ( ! hasPosts ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ inspectorControls }\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\ticon=\"admin-post\"\n\t\t\t\t\t\tlabel={ __( 'Latest Posts' ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! Array.isArray( latestPosts ) ?\n\t\t\t\t\t\t\t<Spinner /> :\n\t\t\t\t\t\t\t__( 'No posts found.' )\n\t\t\t\t\t\t}\n\t\t\t\t\t</Placeholder>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\t// Removing posts from display should be instant.\n\t\tconst displayPosts = latestPosts.length > postsToShow ?\n\t\t\tlatestPosts.slice( 0, postsToShow ) :\n\t\t\tlatestPosts;\n\n\t\tconst layoutControls = [\n\t\t\t{\n\t\t\t\ticon: 'list-view',\n\t\t\t\ttitle: __( 'List view' ),\n\t\t\t\tonClick: () => setAttributes( { postLayout: 'list' } ),\n\t\t\t\tisActive: postLayout === 'list',\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: 'grid-view',\n\t\t\t\ttitle: __( 'Grid view' ),\n\t\t\t\tonClick: () => setAttributes( { postLayout: 'grid' } ),\n\t\t\t\tisActive: postLayout === 'grid',\n\t\t\t},\n\t\t];\n\n\t\tconst dateFormat = __experimentalGetSettings().formats.date;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ inspectorControls }\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<Toolbar controls={ layoutControls } />\n\t\t\t\t</BlockControls>\n\t\t\t\t<ul\n\t\t\t\t\tclassName={ classnames( this.props.className, {\n\t\t\t\t\t\t'wp-block-latest-posts__list': true,\n\t\t\t\t\t\t'is-grid': postLayout === 'grid',\n\t\t\t\t\t\t'has-dates': displayPostDate,\n\t\t\t\t\t\t[ `columns-${ columns }` ]: postLayout === 'grid',\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t{ displayPosts.map( ( post, i ) => {\n\t\t\t\t\t\tconst titleTrimmed = post.title.rendered.trim();\n\t\t\t\t\t\tlet excerpt = post.excerpt.rendered;\n\t\t\t\t\t\tif ( post.excerpt.raw === '' ) {\n\t\t\t\t\t\t\texcerpt = post.content.raw;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst excerptElement = document.createElement( 'div' );\n\t\t\t\t\t\texcerptElement.innerHTML = excerpt;\n\t\t\t\t\t\texcerpt = excerptElement.textContent || excerptElement.innerText || '';\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li key={ i }>\n\t\t\t\t\t\t\t\t<a href={ post.link } target=\"_blank\" rel=\"noreferrer noopener\">\n\t\t\t\t\t\t\t\t\t{ titleTrimmed ? (\n\t\t\t\t\t\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t{ titleTrimmed }\n\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t) :\n\t\t\t\t\t\t\t\t\t\t__( '(no title)' )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{ displayPostDate && post.date_gmt &&\n\t\t\t\t\t\t\t\t\t<time dateTime={ format( 'c', post.date_gmt ) } className=\"wp-block-latest-posts__post-date\">\n\t\t\t\t\t\t\t\t\t\t{ dateI18n( dateFormat, post.date_gmt ) }\n\t\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{ displayPostContent && displayPostContentRadio === 'excerpt' &&\n\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-excerpt\">\n\t\t\t\t\t\t\t\t\t<RawHTML\n\t\t\t\t\t\t\t\t\t\tkey=\"html\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ excerptLength < excerpt.trim().split( ' ' ).length ?\n\t\t\t\t\t\t\t\t\t\t\texcerpt.trim().split( ' ', excerptLength ).join( ' ' ) + ' ... <a href=' + post.link + 'target=\"_blank\" rel=\"noopener noreferrer\">' + __( 'Read more' ) + '</a>' :\n\t\t\t\t\t\t\t\t\t\t\texcerpt.trim().split( ' ', excerptLength ).join( ' ' ) }\n\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{ displayPostContent && displayPostContentRadio === 'full_post' &&\n\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-full-content\">\n\t\t\t\t\t\t\t\t\t<RawHTML\n\t\t\t\t\t\t\t\t\t\tkey=\"html\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ post.content.raw.trim() }\n\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ul>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select, props ) => {\n\tconst { postsToShow, order, orderBy, categories } = props.attributes;\n\tconst { getEntityRecords } = select( 'core' );\n\tconst latestPostsQuery = pickBy( {\n\t\tcategories,\n\t\torder,\n\t\torderby: orderBy,\n\t\tper_page: postsToShow,\n\t}, ( value ) => ! isUndefined( value ) );\n\treturn {\n\t\tlatestPosts: getEntityRecords( 'postType', 'post', latestPostsQuery ),\n\t};\n} )( LatestPostsEdit );\n"]}