{"version":3,"sources":["@wordpress/block-library/src/pullquote/edit.js"],"names":["classnames","includes","__","Component","RichText","ContrastChecker","InspectorControls","withColors","PanelColorSettings","SOLID_COLOR_CLASS","PullQuoteEdit","props","wasTextColorAutomaticallyComputed","pullQuoteMainColorSetter","bind","pullQuoteTextColorSetter","colorValue","colorUtils","textColor","setTextColor","setMainColor","className","isSolidColorStyle","needTextColor","color","shouldSetTextColor","getMostReadableColor","attributes","mainColor","setAttributes","isSelected","value","citation","figureStyles","backgroundColor","borderColor","figureClasses","class","blockquoteStyles","blockquoteClasses","nextValue","isEmpty","nextCitation","onChange","label"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport {\n\tRichText,\n\tContrastChecker,\n\tInspectorControls,\n\twithColors,\n\tPanelColorSettings,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { SOLID_COLOR_CLASS } from './shared';\n\nclass PullQuoteEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.wasTextColorAutomaticallyComputed = false;\n\t\tthis.pullQuoteMainColorSetter = this.pullQuoteMainColorSetter.bind( this );\n\t\tthis.pullQuoteTextColorSetter = this.pullQuoteTextColorSetter.bind( this );\n\t}\n\n\tpullQuoteMainColorSetter( colorValue ) {\n\t\tconst { colorUtils, textColor, setTextColor, setMainColor, className } = this.props;\n\t\tconst isSolidColorStyle = includes( className, SOLID_COLOR_CLASS );\n\t\tconst needTextColor = ! textColor.color || this.wasTextColorAutomaticallyComputed;\n\t\tconst shouldSetTextColor = isSolidColorStyle && needTextColor && colorValue;\n\n\t\tsetMainColor( colorValue );\n\t\tif ( shouldSetTextColor ) {\n\t\t\tthis.wasTextColorAutomaticallyComputed = true;\n\t\t\tsetTextColor( colorUtils.getMostReadableColor( colorValue ) );\n\t\t}\n\t}\n\n\tpullQuoteTextColorSetter( colorValue ) {\n\t\tconst { setTextColor } = this.props;\n\t\tsetTextColor( colorValue );\n\t\tthis.wasTextColorAutomaticallyComputed = false;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tmainColor,\n\t\t\ttextColor,\n\t\t\tsetAttributes,\n\t\t\tisSelected,\n\t\t\tclassName,\n\t\t} = this.props;\n\n\t\tconst { value, citation } = attributes;\n\n\t\tconst isSolidColorStyle = includes( className, SOLID_COLOR_CLASS );\n\t\tconst figureStyles = isSolidColorStyle ?\n\t\t\t{ backgroundColor: mainColor.color } :\n\t\t\t{ borderColor: mainColor.color };\n\n\t\tconst figureClasses = classnames( className, {\n\t\t\t'has-background': isSolidColorStyle && mainColor.color,\n\t\t\t[ mainColor.class ]: isSolidColorStyle && mainColor.class,\n\t\t} );\n\n\t\tconst blockquoteStyles = {\n\t\t\tcolor: textColor.color,\n\t\t};\n\n\t\tconst blockquoteClasses = textColor.color && classnames(\n\t\t\t'has-text-color',\n\t\t\t{ [ textColor.class ]: textColor.class }\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<figure style={ figureStyles } className={ figureClasses }>\n\t\t\t\t\t<blockquote style={ blockquoteStyles } className={ blockquoteClasses }>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t( nextValue ) => setAttributes( {\n\t\t\t\t\t\t\t\t\tvalue: nextValue,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t// translators: placeholder text used for the quote\n\t\t\t\t\t\t\t\t__( 'Write quote…' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twrapperClassName=\"block-library-pullquote__content\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ( ! RichText.isEmpty( citation ) || isSelected ) && (\n\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\tvalue={ citation }\n\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t// translators: placeholder text used for the citation\n\t\t\t\t\t\t\t\t\t__( 'Write citation…' )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t( nextCitation ) => setAttributes( {\n\t\t\t\t\t\t\t\t\t\tcitation: nextCitation,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"wp-block-pullquote__citation\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</blockquote>\n\t\t\t\t</figure>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color Settings' ) }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: mainColor.color,\n\t\t\t\t\t\t\t\tonChange: this.pullQuoteMainColorSetter,\n\t\t\t\t\t\t\t\tlabel: __( 'Main Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: this.pullQuoteTextColorSetter,\n\t\t\t\t\t\t\t\tlabel: __( 'Text Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isSolidColorStyle && (\n\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\ttextColor: textColor.color,\n\t\t\t\t\t\t\t\t\tbackgroundColor: mainColor.color,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tisLargeText={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t</InspectorControls>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default withColors( { mainColor: 'background-color', textColor: 'color' } )(\n\tPullQuoteEdit\n);\n"]}