{"version":3,"sources":["@wordpress/block-library/src/list/transforms.js"],"names":["createBlock","getBlockAttributes","getPhrasingContentSchema","__UNSTABLE_LINE_SEPARATOR","create","join","replace","split","toHTMLString","listContentSchema","ul","ol","attributes","forEach","tag","children","li","transforms","from","type","isMultiBlock","blocks","transform","blockAttributes","values","value","map","content","html","length","multilineTag","selector","schema","node","outerHTML","ordered","nodeName","prefix","to","multilineWrapperTags","piece"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tcreateBlock,\n\tgetBlockAttributes,\n\tgetPhrasingContentSchema,\n} from '@wordpress/blocks';\nimport {\n\t__UNSTABLE_LINE_SEPARATOR,\n\tcreate,\n\tjoin,\n\treplace,\n\tsplit,\n\ttoHTMLString,\n} from '@wordpress/rich-text';\n\nconst listContentSchema = {\n\t...getPhrasingContentSchema(),\n\tul: {},\n\tol: { attributes: [ 'type' ] },\n};\n\n// Recursion is needed.\n// Possible: ul > li > ul.\n// Impossible: ul > ul.\n[ 'ul', 'ol' ].forEach( ( tag ) => {\n\tlistContentSchema[ tag ].children = {\n\t\tli: {\n\t\t\tchildren: listContentSchema,\n\t\t},\n\t};\n} );\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\ttransform: ( blockAttributes ) => {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tvalues: toHTMLString( {\n\t\t\t\t\t\tvalue: join( blockAttributes.map( ( { content } ) => {\n\t\t\t\t\t\t\tconst value = create( { html: content } );\n\n\t\t\t\t\t\t\tif ( blockAttributes.length > 1 ) {\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// When converting only one block, transform\n\t\t\t\t\t\t\t// every line to a list item.\n\t\t\t\t\t\t\treturn replace( value, /\\n/g, __UNSTABLE_LINE_SEPARATOR );\n\t\t\t\t\t\t} ), __UNSTABLE_LINE_SEPARATOR ),\n\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t} ),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/quote' ],\n\t\t\ttransform: ( { value } ) => {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tvalues: toHTMLString( {\n\t\t\t\t\t\tvalue: create( { html: value, multilineTag: 'p' } ),\n\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t} ),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tselector: 'ol,ul',\n\t\t\tschema: {\n\t\t\t\tol: listContentSchema.ol,\n\t\t\t\tul: listContentSchema.ul,\n\t\t\t},\n\t\t\ttransform( node ) {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\t...getBlockAttributes(\n\t\t\t\t\t\t'core/list',\n\t\t\t\t\t\tnode.outerHTML\n\t\t\t\t\t),\n\t\t\t\t\tordered: node.nodeName === 'OL',\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t...[ '*', '-' ].map( ( prefix ) => ( {\n\t\t\ttype: 'prefix',\n\t\t\tprefix,\n\t\t\ttransform( content ) {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tvalues: `<li>${ content }</li>`,\n\t\t\t\t} );\n\t\t\t},\n\t\t} ) ),\n\t\t...[ '1.', '1)' ].map( ( prefix ) => ( {\n\t\t\ttype: 'prefix',\n\t\t\tprefix,\n\t\t\ttransform( content ) {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tordered: true,\n\t\t\t\t\tvalues: `<li>${ content }</li>`,\n\t\t\t\t} );\n\t\t\t},\n\t\t} ) ),\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\ttransform: ( { values } ) =>\n\t\t\t\tsplit( create( {\n\t\t\t\t\thtml: values,\n\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\tmultilineWrapperTags: [ 'ul', 'ol' ],\n\t\t\t\t} ), __UNSTABLE_LINE_SEPARATOR )\n\t\t\t\t\t.map( ( piece ) =>\n\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\t\tcontent: toHTMLString( { value: piece } ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/quote' ],\n\t\t\ttransform: ( { values } ) => {\n\t\t\t\treturn createBlock( 'core/quote', {\n\t\t\t\t\tvalue: toHTMLString( {\n\t\t\t\t\t\tvalue: create( {\n\t\t\t\t\t\t\thtml: values,\n\t\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t\t\tmultilineWrapperTags: [ 'ul', 'ol' ],\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\tmultilineTag: 'p',\n\t\t\t\t\t} ),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"]}