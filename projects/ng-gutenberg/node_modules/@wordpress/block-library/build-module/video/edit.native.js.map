{"version":3,"sources":["@wordpress/block-library/src/video/edit.native.js"],"names":["React","View","TouchableWithoutFeedback","Text","Video","mediaUploadSync","requestImageFailedRetryDialog","requestImageUploadCancelDialog","Icon","Toolbar","ToolbarButton","Caption","MediaPlaceholder","MediaUpload","MEDIA_TYPE_VIDEO","BlockControls","InspectorControls","__","isURL","doAction","hasAction","MediaUploadProgress","style","SvgIcon","SvgIconRetry","VIDEO_ASPECT_RATIO","VideoEdit","props","state","isCaptionSelected","showSettings","videoContainerHeight","mediaUploadStateReset","bind","onSelectMediaUploadOption","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","updateMediaProgress","onVideoPressed","onVideoContanerLayout","onFocusCaption","attributes","id","src","isUploadInProgress","setState","payload","setAttributes","mediaUrl","url","mediaServerId","mediaId","event","width","nativeEvent","layout","height","isRetryIcon","isMediaPlaceholder","icon","iconUploading","isSelected","toolbarEditButton","open","getMediaOptions","flex","getIcon","onFocus","isUploadFailed","retryMessage","showVideo","styleIconContainer","modalIconRetry","modalIcon","iconContainer","videoStyle","video","containerStyle","containerFocused","container","videoContainer","uri","placeholder","uploadFailedText","clientId","onBlur","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport React from 'react';\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\n/**\n * Internal dependencies\n */\nimport Video from './video-player';\nimport {\n\tmediaUploadSync,\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n} from 'react-native-gutenberg-bridge';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tIcon,\n\tToolbar,\n\tToolbarButton,\n} from '@wordpress/components';\nimport {\n\tCaption,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMEDIA_TYPE_VIDEO,\n\tBlockControls,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { isURL } from '@wordpress/url';\nimport { doAction, hasAction } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport MediaUploadProgress from '../image/media-upload-progress';\nimport style from './style.scss';\nimport SvgIcon from './icon';\nimport SvgIconRetry from './icon-retry';\n\nconst VIDEO_ASPECT_RATIO = 1.7;\n\nclass VideoEdit extends React.Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisCaptionSelected: false,\n\t\t\tshowSettings: false,\n\t\t\tvideoContainerHeight: 0,\n\t\t};\n\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t\tthis.onSelectMediaUploadOption = this.onSelectMediaUploadOption.bind( this );\n\t\tthis.finishMediaUploadWithSuccess = this.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure = this.finishMediaUploadWithFailure.bind( this );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.onVideoPressed = this.onVideoPressed.bind( this );\n\t\tthis.onVideoContanerLayout = this.onVideoContanerLayout.bind( this );\n\t\tthis.onFocusCaption = this.onFocusCaption.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes } = this.props;\n\t\tif ( attributes.id && ! isURL( attributes.src ) ) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// this action will only exist if the user pressed the trash button on the block holder\n\t\tif ( hasAction( 'blocks.onRemoveBlockCheckUpload' ) && this.state.isUploadInProgress ) {\n\t\t\tdoAction( 'blocks.onRemoveBlockCheckUpload', this.props.attributes.id );\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\t// Avoid a UI flicker in the toolbar by insuring that isCaptionSelected\n\t\t// is updated immediately any time the isSelected prop becomes false\n\t\treturn {\n\t\t\tisCaptionSelected: props.isSelected && state.isCaptionSelected,\n\t\t};\n\t}\n\n\tonVideoPressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if ( attributes.id && ! isURL( attributes.src ) ) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tisCaptionSelected: false,\n\t\t} );\n\t}\n\n\tonFocusCaption() {\n\t\tif ( ! this.state.isCaptionSelected ) {\n\t\t\tthis.setState( { isCaptionSelected: true } );\n\t\t}\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { src: payload.mediaUrl, id: payload.mediaServerId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: null, src: null } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonSelectMediaUploadOption( mediaId, mediaUrl ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: mediaId, src: mediaUrl } );\n\t}\n\n\tonVideoContanerLayout( event ) {\n\t\tconst { width } = event.nativeEvent.layout;\n\t\tconst height = width / VIDEO_ASPECT_RATIO;\n\t\tif ( height !== this.state.videoContainerHeight ) {\n\t\t\tthis.setState( { videoContainerHeight: height } );\n\t\t}\n\t}\n\n\tgetIcon( isRetryIcon, isMediaPlaceholder ) {\n\t\tif ( isRetryIcon ) {\n\t\t\treturn <Icon icon={ SvgIconRetry } { ...style.icon } />;\n\t\t}\n\n\t\treturn <Icon icon={ SvgIcon } { ...( ! isMediaPlaceholder ? style.iconUploading : style.icon ) } />;\n\t}\n\n\trender() {\n\t\tconst { attributes, isSelected } = this.props;\n\t\tconst { id, src } = attributes;\n\t\tconst { videoContainerHeight } = this.state;\n\n\t\tconst toolbarEditButton = (\n\t\t\t<MediaUpload mediaType={ MEDIA_TYPE_VIDEO }\n\t\t\t\tonSelectURL={ this.onSelectMediaUploadOption }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Edit video' ) }\n\t\t\t\t\t\t\t\ticon=\"edit\"\n\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t);\n\t\t\t\t} } >\n\t\t\t</MediaUpload>\n\t\t);\n\n\t\tif ( ! id ) {\n\t\t\treturn (\n\t\t\t\t<View style={ { flex: 1 } } >\n\t\t\t\t\t<MediaPlaceholder\n\t\t\t\t\t\tmediaType={ MEDIA_TYPE_VIDEO }\n\t\t\t\t\t\tonSelectURL={ this.onSelectMediaUploadOption }\n\t\t\t\t\t\ticon={ this.getIcon( false, true ) }\n\t\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback onPress={ this.onVideoPressed } disabled={ ! isSelected }>\n\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t{ ! this.state.isCaptionSelected &&\n\t\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t\t{ toolbarEditButton }\n\t\t\t\t\t\t</BlockControls> }\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t{ false && <ToolbarButton //Not rendering settings button until it has an action\n\t\t\t\t\t\t\tlabel={ __( 'Video Settings' ) }\n\t\t\t\t\t\t\ticon=\"admin-generic\"\n\t\t\t\t\t\t\tonClick={ () => ( null ) }\n\t\t\t\t\t\t/> }\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tonFinishMediaUploadWithSuccess={ this.finishMediaUploadWithSuccess }\n\t\t\t\t\t\tonFinishMediaUploadWithFailure={ this.finishMediaUploadWithFailure }\n\t\t\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\t\t\trenderContent={ ( { isUploadInProgress, isUploadFailed, retryMessage } ) => {\n\t\t\t\t\t\t\tconst showVideo = isURL( src ) && ! isUploadInProgress && ! isUploadFailed;\n\t\t\t\t\t\t\tconst icon = this.getIcon( isUploadFailed, false );\n\t\t\t\t\t\t\tconst styleIconContainer = isUploadFailed ? style.modalIconRetry : style.modalIcon;\n\n\t\t\t\t\t\t\tconst iconContainer = (\n\t\t\t\t\t\t\t\t<View style={ styleIconContainer }>\n\t\t\t\t\t\t\t\t\t{ icon }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst videoStyle = {\n\t\t\t\t\t\t\t\theight: videoContainerHeight,\n\t\t\t\t\t\t\t\t...style.video,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tconst containerStyle = showVideo && isSelected ? style.containerFocused : style.container;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<View onLayout={ this.onVideoContanerLayout } style={ containerStyle }>\n\t\t\t\t\t\t\t\t\t{ showVideo &&\n\t\t\t\t\t\t\t\t\t\t<View style={ style.videoContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected && ! this.state.isCaptionSelected }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ videoStyle }\n\t\t\t\t\t\t\t\t\t\t\t\tsource={ { uri: src } }\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={ true }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{ ! showVideo &&\n\t\t\t\t\t\t\t\t\t\t<View style={ { height: videoContainerHeight, width: '100%', ...style.placeholder } }>\n\t\t\t\t\t\t\t\t\t\t\t{ videoContainerHeight > 0 && iconContainer }\n\t\t\t\t\t\t\t\t\t\t\t{ isUploadFailed && <Text style={ style.uploadFailedText }>{ retryMessage }</Text> }\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tclientId={ this.props.clientId }\n\t\t\t\t\t\tisSelected={ this.state.isCaptionSelected }\n\t\t\t\t\t\tonFocus={ this.onFocusCaption }\n\t\t\t\t\t\tonBlur={ this.props.onBlur } // always assign onBlur as props\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n}\n\nexport default VideoEdit;\n"]}