{"version":3,"sources":["@wordpress/components/src/dropdown-menu/index.js"],"names":["mergeProps","defaultProps","props","mergedProps","className","DropdownMenu","children","controls","hasArrowIndicator","icon","label","popoverProps","toggleProps","menuProps","menuLabel","position","alternative","plugin","controlSets","Array","isArray","mergedPopoverProps","isOpen","onToggle","openOnArrowDown","event","keyCode","DOWN","preventDefault","stopPropagation","mergedToggleProps","tooltip","mergedMenuProps","controlSet","indexOfSet","map","control","indexOfControl","join","onClose","onClick","isActive","isDisabled","title"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { flatMap, isEmpty, isFunction } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { DOWN } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport IconButton from '../icon-button';\nimport Dropdown from '../dropdown';\nimport { NavigableMenu } from '../navigable-container';\n\nfunction mergeProps( defaultProps = {}, props = {} ) {\n\tconst mergedProps = {\n\t\t...defaultProps,\n\t\t...props,\n\t};\n\n\tif ( props.className && defaultProps.className ) {\n\t\tmergedProps.className = classnames( props.className, defaultProps.className );\n\t}\n\n\treturn mergedProps;\n}\n\nfunction DropdownMenu( {\n\tchildren,\n\tclassName,\n\tcontrols,\n\thasArrowIndicator = false,\n\ticon = 'menu',\n\tlabel,\n\tpopoverProps,\n\ttoggleProps,\n\tmenuProps,\n\t// The following props exist for backward compatibility.\n\tmenuLabel,\n\tposition,\n} ) {\n\tif ( menuLabel ) {\n\t\tdeprecated( '`menuLabel` prop in `DropdownComponent`', {\n\t\t\talternative: '`menuProps` object and its `aria-label` property',\n\t\t\tplugin: 'Gutenberg',\n\t\t} );\n\t}\n\n\tif ( position ) {\n\t\tdeprecated( '`position` prop in `DropdownComponent`', {\n\t\t\talternative: '`popoverProps` object and its `position` property',\n\t\t\tplugin: 'Gutenberg',\n\t\t} );\n\t}\n\n\tif ( isEmpty( controls ) && ! isFunction( children ) ) {\n\t\treturn null;\n\t}\n\n\t// Normalize controls to nested array of objects (sets of controls)\n\tlet controlSets;\n\tif ( ! isEmpty( controls ) ) {\n\t\tcontrolSets = controls;\n\t\tif ( ! Array.isArray( controlSets[ 0 ] ) ) {\n\t\t\tcontrolSets = [ controlSets ];\n\t\t}\n\t}\n\tconst mergedPopoverProps = mergeProps( {\n\t\tclassName: 'components-dropdown-menu__popover',\n\t\tposition,\n\t}, popoverProps );\n\n\treturn (\n\t\t<Dropdown\n\t\t\tclassName={ classnames( 'components-dropdown-menu', className ) }\n\t\t\tpopoverProps={ mergedPopoverProps }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst mergedToggleProps = mergeProps( {\n\t\t\t\t\tclassName: classnames( 'components-dropdown-menu__toggle', {\n\t\t\t\t\t\t'is-opened': isOpen,\n\t\t\t\t\t} ),\n\t\t\t\t\ttooltip: label,\n\t\t\t\t}, toggleProps );\n\n\t\t\t\treturn (\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\t{ ...mergedToggleProps }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( ! icon || hasArrowIndicator ) && <span className=\"components-dropdown-menu__indicator\" /> }\n\t\t\t\t\t</IconButton>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ ( props ) => {\n\t\t\t\tconst mergedMenuProps = mergeProps( {\n\t\t\t\t\t'aria-label': menuLabel || label,\n\t\t\t\t\tclassName: 'components-dropdown-menu__menu',\n\t\t\t\t}, menuProps );\n\n\t\t\t\treturn (\n\t\t\t\t\t<NavigableMenu\n\t\t\t\t\t\t{ ...mergedMenuProps }\n\t\t\t\t\t\trole=\"menu\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisFunction( children ) ?\n\t\t\t\t\t\t\t\tchildren( props ) :\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ flatMap( controlSets, ( controlSet, indexOfSet ) => (\n\t\t\t\t\t\t\tcontrolSet.map( ( control, indexOfControl ) => (\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tkey={ [ indexOfSet, indexOfControl ].join() }\n\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\t\t\t\tprops.onClose();\n\t\t\t\t\t\t\t\t\t\tif ( control.onClick ) {\n\t\t\t\t\t\t\t\t\t\t\tcontrol.onClick();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\t\t'components-dropdown-menu__menu-item',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'has-separator': indexOfSet > 0 && indexOfControl === 0,\n\t\t\t\t\t\t\t\t\t\t\t'is-active': control.isActive,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\ticon={ control.icon }\n\t\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\t\tdisabled={ control.isDisabled }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ control.title }\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t) )\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t);\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default DropdownMenu;\n"]}