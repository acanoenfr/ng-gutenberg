{"version":3,"sources":["@wordpress/components/src/mobile/html-text-input/index.native.js"],"names":["HTMLTextInput","arguments","edit","bind","stopEditing","state","isDirty","value","html","props","onChange","setState","onPersist","parentHeight","styles","htmlViewTitle","title","editTitle","htmlView","HTMLInputContainer","scrollEnabled","Component","select","getEditedPostAttribute","getEditedPostContent","dispatch","resetBlocks","editPost","content","withInstanceId"],"mappings":";;;;;;;;;AAQA;;;;;;;;;;;;;;AALA;;AAMA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AAlBA;;;;AAKA;;;;AASA;;;IAMaA,a;;;;;AACZ,2BAAc;AAAA;;AAAA;AACb,oHAAUC,SAAV;AAEA,UAAKC,IAAL,GAAY,MAAKA,IAAL,CAAUC,IAAV,6CAAZ;AACA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBD,IAAjB,6CAAnB;AAEA,UAAKE,KAAL,GAAa;AACZC,MAAAA,OAAO,EAAE,KADG;AAEZC,MAAAA,KAAK,EAAE;AAFK,KAAb;AANa;AAUb;;;;2CAasB;AACtB;AACA,WAAKH,WAAL;AACA;;;yBAEKI,I,EAAO;AACZ,WAAKC,KAAL,CAAWC,QAAX,CAAqBF,IAArB;AACA,WAAKG,QAAL,CAAe;AAAEJ,QAAAA,KAAK,EAAEC,IAAT;AAAeF,QAAAA,OAAO,EAAE;AAAxB,OAAf;AACA;;;kCAEa;AACb,UAAK,KAAKD,KAAL,CAAWC,OAAhB,EAA0B;AACzB,aAAKG,KAAL,CAAWG,SAAX,CAAsB,KAAKP,KAAL,CAAWE,KAAjC;AACA,aAAKI,QAAL,CAAe;AAAEL,UAAAA,OAAO,EAAE;AAAX,SAAf;AACA;AACD;;;6BAEQ;AACR,aACC,4BAAC,kBAAD;AAAoB,QAAA,YAAY,EAAG,KAAKG,KAAL,CAAWI;AAA9C,SACC,4BAAC,sBAAD;AACC,QAAA,WAAW,EAAG,KADf;AAEC,QAAA,kBAAkB,EAAC,iBAFpB;AAGC,QAAA,iBAAiB,EAAC,QAHnB;AAIC,QAAA,aAAa,EAAG,CAJjB;AAKC,QAAA,KAAK,EAAGC,eAAOC,aALhB;AAMC,QAAA,KAAK,EAAG,KAAKN,KAAL,CAAWO,KANpB;AAOC,QAAA,WAAW,EAAG,cAAI,WAAJ,CAPf;AAQC,QAAA,YAAY,EAAG,KAAKP,KAAL,CAAWQ;AAR3B,QADD,EAWC,4BAAC,sBAAD;AACC,QAAA,WAAW,EAAG,KADf;AAEC,QAAA,kBAAkB,EAAC,mBAFpB;AAGC,QAAA,iBAAiB,EAAC,KAHnB;AAIC,QAAA,SAAS,MAJV;AAKC,QAAA,KAAK,EAAGH,eAAOI,QALhB;AAMC,QAAA,KAAK,EAAG,KAAKb,KAAL,CAAWE,KANpB;AAOC,QAAA,YAAY,EAAG,KAAKL,IAPrB;AAQC,QAAA,MAAM,EAAG,KAAKE,WARf;AASC,QAAA,WAAW,EAAG,cAAI,gBAAJ,CATf;AAUC,QAAA,aAAa,EAAGe,mBAAmBC;AAVpC,QAXD,CADD;AA0BA;;;6CAvDgCX,K,EAAOJ,K,EAAQ;AAC/C,UAAKA,KAAK,CAACC,OAAX,EAAqB;AACpB,eAAO,IAAP;AACA;;AAED,aAAO;AACNC,QAAAA,KAAK,EAAEE,KAAK,CAACF,KADP;AAEND,QAAAA,OAAO,EAAE;AAFH,OAAP;AAIA;;;EAtBiCe,kB;;;;eAuEpB,sBAAS,CACvB,sBAAY,UAAEC,MAAF,EAAc;AAAA,gBAIrBA,MAAM,CAAE,aAAF,CAJe;AAAA,MAExBC,sBAFwB,WAExBA,sBAFwB;AAAA,MAGxBC,oBAHwB,WAGxBA,oBAHwB;;AAMzB,SAAO;AACNR,IAAAA,KAAK,EAAEO,sBAAsB,CAAE,OAAF,CADvB;AAENhB,IAAAA,KAAK,EAAEiB,oBAAoB;AAFrB,GAAP;AAIA,CAVD,CADuB,EAYvB,wBAAc,UAAEC,QAAF,EAAgB;AAAA,kBACLA,QAAQ,CAAE,mBAAF,CADH;AAAA,MACrBC,WADqB,aACrBA,WADqB;;AAAA,mBAERD,QAAQ,CAAE,aAAF,CAFA;AAAA,MAErBE,QAFqB,cAErBA,QAFqB;;AAG7B,SAAO;AACNV,IAAAA,SADM,qBACKD,KADL,EACa;AAClBW,MAAAA,QAAQ,CAAE;AAAEX,QAAAA,KAAK,EAALA;AAAF,OAAF,CAAR;AACA,KAHK;AAINN,IAAAA,QAJM,oBAIIkB,OAJJ,EAIc;AACnBD,MAAAA,QAAQ,CAAE;AAAEC,QAAAA,OAAO,EAAPA;AAAF,OAAF,CAAR;AACA,KANK;AAONhB,IAAAA,SAPM,qBAOKgB,OAPL,EAOe;AACpBF,MAAAA,WAAW,CAAE,mBAAOE,OAAP,CAAF,CAAX;AACA;AATK,GAAP;AAWA,CAdD,CAZuB,EA2BvBC,uBA3BuB,CAAT,EA4BV7B,aA5BU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { TextInput } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { parse } from '@wordpress/blocks';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport HTMLInputContainer from './container';\nimport styles from './style.scss';\n\nexport class HTMLTextInput extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.edit = this.edit.bind( this );\n\t\tthis.stopEditing = this.stopEditing.bind( this );\n\n\t\tthis.state = {\n\t\t\tisDirty: false,\n\t\t\tvalue: '',\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\tif ( state.isDirty ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: props.value,\n\t\t\tisDirty: false,\n\t\t};\n\t}\n\n\tcomponentWillUnmount() {\n\t\t//TODO: Blocking main thread\n\t\tthis.stopEditing();\n\t}\n\n\tedit( html ) {\n\t\tthis.props.onChange( html );\n\t\tthis.setState( { value: html, isDirty: true } );\n\t}\n\n\tstopEditing() {\n\t\tif ( this.state.isDirty ) {\n\t\t\tthis.props.onPersist( this.state.value );\n\t\t\tthis.setState( { isDirty: false } );\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<HTMLInputContainer parentHeight={ this.props.parentHeight }>\n\t\t\t\t<TextInput\n\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\taccessibilityLabel=\"html-view-title\"\n\t\t\t\t\ttextAlignVertical=\"center\"\n\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\tstyle={ styles.htmlViewTitle }\n\t\t\t\t\tvalue={ this.props.title }\n\t\t\t\t\tplaceholder={ __( 'Add title' ) }\n\t\t\t\t\tonChangeText={ this.props.editTitle }\n\t\t\t\t/>\n\t\t\t\t<TextInput\n\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\taccessibilityLabel=\"html-view-content\"\n\t\t\t\t\ttextAlignVertical=\"top\"\n\t\t\t\t\tmultiline\n\t\t\t\t\tstyle={ styles.htmlView }\n\t\t\t\t\tvalue={ this.state.value }\n\t\t\t\t\tonChangeText={ this.edit }\n\t\t\t\t\tonBlur={ this.stopEditing }\n\t\t\t\t\tplaceholder={ __( 'Start writingâ€¦' ) }\n\t\t\t\t\tscrollEnabled={ HTMLInputContainer.scrollEnabled }\n\t\t\t\t/>\n\t\t\t</HTMLInputContainer>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetEditedPostAttribute,\n\t\t\tgetEditedPostContent,\n\t\t} = select( 'core/editor' );\n\n\t\treturn {\n\t\t\ttitle: getEditedPostAttribute( 'title' ),\n\t\t\tvalue: getEditedPostContent(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { resetBlocks } = dispatch( 'core/block-editor' );\n\t\tconst { editPost } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\teditTitle( title ) {\n\t\t\t\teditPost( { title } );\n\t\t\t},\n\t\t\tonChange( content ) {\n\t\t\t\teditPost( { content } );\n\t\t\t},\n\t\t\tonPersist( content ) {\n\t\t\t\tresetBlocks( parse( content ) );\n\t\t\t},\n\t\t};\n\t} ),\n\twithInstanceId,\n] )( HTMLTextInput );\n"]}