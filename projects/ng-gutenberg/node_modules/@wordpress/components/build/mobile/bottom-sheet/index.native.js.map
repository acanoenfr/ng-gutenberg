{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/index.native.js"],"names":["BottomSheet","arguments","onSafeAreaInsetsUpdate","bind","state","safeAreaBottomInset","SafeArea","getSafeAreaInsetsForRootView","then","safeAreaEventSubscription","addEventListener","remove","removeEventListener","result","safeAreaInsets","bottom","setState","props","title","isVisible","leftButton","rightButton","hideHeader","style","contentStyle","panResponder","PanResponder","create","onMoveShouldSetPanResponder","evt","gestureState","dy","getHeader","styles","head","flex","titleContainer","separator","Dimensions","get","height","easing","Easing","bezier","animationIn","from","translateY","to","animationOut","bottomModal","onClose","panHandlers","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","Platform","OS","background","borderColor","dragIndicator","emptyHeaderSpace","content","children","Component","getWidth","Math","min","width","maxWidth","Button","Cell","PickerCell","SwitchCell"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { Text, View, Platform, PanResponder, Dimensions, Easing } from 'react-native';\nimport Modal from 'react-native-modal';\nimport SafeArea from 'react-native-safe-area';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\nimport Button from './button';\nimport Cell from './cell';\nimport PickerCell from './picker-cell';\nimport SwitchCell from './switch-cell';\nimport KeyboardAvoidingView from './keyboard-avoiding-view';\n\nclass BottomSheet extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSafeAreaInsetsUpdate = this.onSafeAreaInsetsUpdate.bind( this );\n\t\tthis.state = {\n\t\t\tsafeAreaBottomInset: 0,\n\t\t};\n\n\t\tSafeArea.getSafeAreaInsetsForRootView().then( this.onSafeAreaInsetsUpdate );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.safeAreaEventSubscription = SafeArea.addEventListener( 'safeAreaInsetsForRootViewDidChange', this.onSafeAreaInsetsUpdate );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.safeAreaEventSubscription === null ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.safeAreaEventSubscription.remove();\n\t\tthis.safeAreaEventSubscription = null;\n\t\tSafeArea.removeEventListener( 'safeAreaInsetsForRootViewDidChange', this.onSafeAreaInsetsUpdate );\n\t}\n\n\tonSafeAreaInsetsUpdate( result ) {\n\t\tif ( this.safeAreaEventSubscription === null ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { safeAreaInsets } = result;\n\t\tif ( this.state.safeAreaBottomInset !== safeAreaInsets.bottom ) {\n\t\t\tthis.setState( { safeAreaBottomInset: safeAreaInsets.bottom } );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\ttitle = '',\n\t\t\tisVisible,\n\t\t\tleftButton,\n\t\t\trightButton,\n\t\t\thideHeader,\n\t\t\tstyle = {},\n\t\t\tcontentStyle = {},\n\t\t} = this.props;\n\n\t\tconst panResponder = PanResponder.create( {\n\t\t\tonMoveShouldSetPanResponder: ( evt, gestureState ) => {\n\t\t\t\t// Activates swipe down over child Touchables if the swipe is long enough.\n\t\t\t\t// With this we can adjust sensibility on the swipe vs tap gestures.\n\t\t\t\tif ( gestureState.dy > 3 ) {\n\t\t\t\t\tgestureState.dy = 0;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\t\t} );\n\n\t\tconst getHeader = () => (\n\t\t\t<View>\n\t\t\t\t<View style={ styles.head }>\n\t\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t\t{ leftButton }\n\t\t\t\t\t</View>\n\t\t\t\t\t<View style={ styles.titleContainer }>\n\t\t\t\t\t\t<Text style={ styles.title }>\n\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</View>\n\t\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t\t{ rightButton }\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t\t<View style={ styles.separator } />\n\t\t\t</View>\n\t\t);\n\n\t\tconst { height } = Dimensions.get( 'window' );\n\t\tconst easing = Easing.bezier( 0.450, 0.000, 0.160, 1.020 );\n\n\t\tconst animationIn = {\n\t\t\teasing,\n\t\t\tfrom: {\n\t\t\t\ttranslateY: height,\n\t\t\t},\n\t\t\tto: {\n\t\t\t\ttranslateY: 0,\n\t\t\t},\n\t\t};\n\n\t\tconst animationOut = {\n\t\t\teasing,\n\t\t\tfrom: {\n\t\t\t\ttranslateY: 0,\n\t\t\t},\n\t\t\tto: {\n\t\t\t\ttranslateY: height,\n\t\t\t},\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\tisVisible={ isVisible }\n\t\t\t\tstyle={ styles.bottomModal }\n\t\t\t\tanimationIn={ animationIn }\n\t\t\t\tanimationInTiming={ 600 }\n\t\t\t\tanimationOut={ animationOut }\n\t\t\t\tanimationOutTiming={ 250 }\n\t\t\t\tbackdropTransitionInTiming={ 50 }\n\t\t\t\tbackdropTransitionOutTiming={ 50 }\n\t\t\t\tbackdropOpacity={ 0.2 }\n\t\t\t\tonBackdropPress={ this.props.onClose }\n\t\t\t\tonBackButtonPress={ this.props.onClose }\n\t\t\t\tonSwipe={ this.props.onClose }\n\t\t\t\tswipeDirection=\"down\"\n\t\t\t\tonMoveShouldSetResponder={ panResponder.panHandlers.onMoveShouldSetResponder }\n\t\t\t\tonMoveShouldSetResponderCapture={ panResponder.panHandlers.onMoveShouldSetResponderCapture }\n\t\t\t\tonAccessibilityEscape={ this.props.onClose }\n\t\t\t>\n\t\t\t\t<KeyboardAvoidingView\n\t\t\t\t\tbehavior={ Platform.OS === 'ios' && 'padding' }\n\t\t\t\t\tstyle={ { ...styles.background, borderColor: 'rgba(0, 0, 0, 0.1)', ...style } }\n\t\t\t\t\tkeyboardVerticalOffset={ -this.state.safeAreaBottomInset }\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles.dragIndicator } />\n\t\t\t\t\t{ hideHeader && ( <View style={ styles.emptyHeaderSpace } /> ) }\n\t\t\t\t\t{ ! hideHeader && getHeader() }\n\t\t\t\t\t<View style={ [ styles.content, contentStyle ] }>\n\t\t\t\t\t\t{ this.props.children }\n\t\t\t\t\t</View>\n\t\t\t\t\t<View style={ { height: this.state.safeAreaBottomInset } } />\n\t\t\t\t</KeyboardAvoidingView>\n\t\t\t</Modal>\n\n\t\t);\n\t}\n}\n\nfunction getWidth() {\n\treturn Math.min( Dimensions.get( 'window' ).width, styles.background.maxWidth );\n}\n\nBottomSheet.getWidth = getWidth;\nBottomSheet.Button = Button;\nBottomSheet.Cell = Cell;\nBottomSheet.PickerCell = PickerCell;\nBottomSheet.SwitchCell = SwitchCell;\n\nexport default BottomSheet;\n"]}