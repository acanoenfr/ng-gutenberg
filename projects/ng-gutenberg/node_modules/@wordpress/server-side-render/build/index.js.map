{"version":3,"sources":["@wordpress/server-side-render/src/index.js"],"names":["EMPTY_OBJECT","ExportedServerSideRender","select","coreEditorSelect","currentPostId","getCurrentPostId","urlQueryArgs","props","newUrlQueryArgs","post_id","window","wp","components","ServerSideRender","ref","alternative"],"mappings":";;;;;;;;;AAGA;;;;;;;;AACA;;AACA;;AAKA;;AAVA;;;;AAOA;;;;AAKA;;;AAGA,IAAMA,YAAY,GAAG,EAArB;AAEA,IAAMC,wBAAwB,GAAG,sBAChC,UAAEC,MAAF,EAAc;AACb,MAAMC,gBAAgB,GAAGD,MAAM,CAAE,aAAF,CAA/B;;AACA,MAAKC,gBAAL,EAAwB;AACvB,QAAMC,aAAa,GAAGD,gBAAgB,CAACE,gBAAjB,EAAtB;;AACA,QAAKD,aAAL,EAAqB;AACpB,aAAO;AACNA,QAAAA,aAAa,EAAbA;AADM,OAAP;AAGA;AACD;;AACD,SAAOJ,YAAP;AACA,CAZ+B,EAchC,gBAAgE;AAAA,+BAA5DM,YAA4D;AAAA,MAA5DA,YAA4D,kCAA7CN,YAA6C;AAAA,MAA/BI,aAA+B,QAA/BA,aAA+B;AAAA,MAAbG,KAAa;AAC/D,MAAMC,eAAe,GAAG,sBAAS,YAAM;AACtC,QAAK,CAAEJ,aAAP,EAAuB;AACtB,aAAOE,YAAP;AACA;;AACD;AACCG,MAAAA,OAAO,EAAEL;AADV,OAEIE,YAFJ;AAIA,GARuB,EAQrB,CAAEF,aAAF,EAAiBE,YAAjB,CARqB,CAAxB;AAUA,SACC,4BAAC,yBAAD;AAAkB,IAAA,YAAY,EAAGE;AAAjC,KAAwDD,KAAxD,EADD;AAGA,CA5B+B,CAAjC;;AA+BA,IAAKG,MAAM,IAAIA,MAAM,CAACC,EAAjB,IAAuBD,MAAM,CAACC,EAAP,CAAUC,UAAtC,EAAmD;AAClDF,EAAAA,MAAM,CAACC,EAAP,CAAUC,UAAV,CAAqBC,gBAArB,GAAwC,yBAAY,UAAEN,KAAF,EAASO,GAAT,EAAkB;AACrE,6BAAY,gCAAZ,EAA8C;AAC7CC,MAAAA,WAAW,EAAE;AADgC,KAA9C;AAGA,WACC,4BAAC,wBAAD,6BAA+BR,KAA/B;AAAuC,MAAA,GAAG,EAAGO;AAA7C,OADD;AAGA,GAPuC,CAAxC;AAQA;;eAEcb,wB","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, forwardRef } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport ServerSideRender from './server-side-render';\n\n/**\n * Constants\n */\nconst EMPTY_OBJECT = {};\n\nconst ExportedServerSideRender = withSelect(\n\t( select ) => {\n\t\tconst coreEditorSelect = select( 'core/editor' );\n\t\tif ( coreEditorSelect ) {\n\t\t\tconst currentPostId = coreEditorSelect.getCurrentPostId();\n\t\t\tif ( currentPostId ) {\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPostId,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn EMPTY_OBJECT;\n\t}\n)(\n\t( { urlQueryArgs = EMPTY_OBJECT, currentPostId, ...props } ) => {\n\t\tconst newUrlQueryArgs = useMemo( () => {\n\t\t\tif ( ! currentPostId ) {\n\t\t\t\treturn urlQueryArgs;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tpost_id: currentPostId,\n\t\t\t\t...urlQueryArgs,\n\t\t\t};\n\t\t}, [ currentPostId, urlQueryArgs ] );\n\n\t\treturn (\n\t\t\t<ServerSideRender urlQueryArgs={ newUrlQueryArgs } { ...props } />\n\t\t);\n\t}\n);\n\nif ( window && window.wp && window.wp.components ) {\n\twindow.wp.components.ServerSideRender = forwardRef( ( props, ref ) => {\n\t\tdeprecated( 'wp.components.ServerSideRender', {\n\t\t\talternative: 'wp.serverSideRender',\n\t\t} );\n\t\treturn (\n\t\t\t<ExportedServerSideRender { ...props } ref={ ref } />\n\t\t);\n\t} );\n}\n\nexport default ExportedServerSideRender;\n"]}