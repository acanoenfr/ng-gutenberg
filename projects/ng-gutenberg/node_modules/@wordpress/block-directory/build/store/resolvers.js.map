{"version":3,"sources":["@wordpress/block-directory/src/store/resolvers.js"],"names":["getDownloadableBlocks","filterValue","path","results","blocks","map","result","value","key","code","hasInstallBlocksPermission"],"mappings":";;;;;;;;;;;AAGA;;AAKA;;AACA;;AATA;;;;AAKA;;;eAMe;AACZA,EAAAA,qBADY;AAAA;AAAA,2DACWC,WADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAENA,WAFM;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAOZ,mBAAM,sCAAyBA,WAAzB,CAAN;;AAPY;AAAA;AAQI,mBAAM,wBAAU;AAC/BC,cAAAA,IAAI,uDAAiDD,WAAjD;AAD2B,aAAV,CAAN;;AARJ;AAQNE,YAAAA,OARM;AAWNC,YAAAA,MAXM,GAWGD,OAAO,CAACE,GAAR,CAAa,UAAEC,MAAF;AAAA,qBAAc,qBAASA,MAAT,EAAiB,UAAEC,KAAF,EAASC,GAAT,EAAkB;AAC5E,uBAAO,uBAAWA,GAAX,CAAP;AACA,eAFyC,CAAd;AAAA,aAAb,CAXH;AAAA;AAeZ,mBAAM,wCAA2BJ,MAA3B,EAAmCH,WAAnC,CAAN;;AAfY;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,kBAiBP,YAAMQ,IAAN,KAAe,uBAjBR;AAAA;AAAA;AAAA;;AAAA;AAkBX,mBAAM,yCAA4B,KAA5B,CAAN;;AAlBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBZC,EAAAA,0BAtBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBZ,mBAAM,wBAAU;AACfR,cAAAA,IAAI;AADW,aAAV,CAAN;;AAxBY;AAAA;AA2BZ,mBAAM,yCAA4B,IAA5B,CAAN;;AA3BY;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,kBA6BP,aAAMO,IAAN,KAAe,uBA7BR;AAAA;AAAA;AAAA;;AAAA;AA8BX,mBAAM,yCAA4B,KAA5B,CAAN;;AA9BW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C","sourcesContent":["/**\n * External dependencies\n */\nimport { camelCase, mapKeys } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { apiFetch } from './controls';\nimport { fetchDownloadableBlocks, receiveDownloadableBlocks, setInstallBlocksPermission } from './actions';\n\nexport default {\n\t* getDownloadableBlocks( filterValue ) {\n\t\tif ( ! filterValue ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tyield fetchDownloadableBlocks( filterValue );\n\t\t\tconst results = yield apiFetch( {\n\t\t\t\tpath: `__experimental/block-directory/search?term=${ filterValue }`,\n\t\t\t} );\n\t\t\tconst blocks = results.map( ( result ) => mapKeys( result, ( value, key ) => {\n\t\t\t\treturn camelCase( key );\n\t\t\t} ) );\n\n\t\t\tyield receiveDownloadableBlocks( blocks, filterValue );\n\t\t} catch ( error ) {\n\t\t\tif ( error.code === 'rest_user_cannot_view' ) {\n\t\t\t\tyield setInstallBlocksPermission( false );\n\t\t\t}\n\t\t}\n\t},\n\t* hasInstallBlocksPermission() {\n\t\ttry {\n\t\t\tyield apiFetch( {\n\t\t\t\tpath: `__experimental/block-directory/search?term=`,\n\t\t\t} );\n\t\t\tyield setInstallBlocksPermission( true );\n\t\t} catch ( error ) {\n\t\t\tif ( error.code === 'rest_user_cannot_view' ) {\n\t\t\t\tyield setInstallBlocksPermission( false );\n\t\t\t}\n\t\t}\n\t},\n};\n"]}