{"version":3,"sources":["@wordpress/editor/src/components/post-title/index.native.js"],"names":["PostTitle","prevProps","props","isSelected","isAnyBlockSelected","onUnselect","innerRef","onSelect","placeholder","style","title","focusedBorderColor","borderStyle","decodedPlaceholder","borderColor","styles","titleContainer","onBlur","value","onUpdate","onEnterPress","pasteHandler","Component","select","isPostTitleSelected","getSelectedBlockClientId","dispatch","undo","redo","togglePostTitleSelection","clearSelectedBlock","insertDefaultBlock","undefined","onUndo","onRedo","withInstanceId","withFocusOutside"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { RichText } from '@wordpress/rich-text';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withFocusOutside } from '@wordpress/components';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { pasteHandler } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nclass PostTitle extends Component {\n\tcomponentDidUpdate( prevProps ) {\n\t\t// Unselect if any other block is selected\n\t\tif ( this.props.isSelected && ! prevProps.isAnyBlockSelected && this.props.isAnyBlockSelected ) {\n\t\t\tthis.props.onUnselect();\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.props.innerRef ) {\n\t\t\tthis.props.innerRef( this );\n\t\t}\n\t}\n\n\thandleFocusOutside() {\n\t\tthis.props.onUnselect();\n\t}\n\n\tfocus() {\n\t\tthis.props.onSelect();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tplaceholder,\n\t\t\tstyle,\n\t\t\ttitle,\n\t\t\tfocusedBorderColor,\n\t\t\tborderStyle,\n\t\t} = this.props;\n\n\t\tconst decodedPlaceholder = decodeEntities( placeholder );\n\t\tconst borderColor = this.props.isSelected ? focusedBorderColor : 'transparent';\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [ styles.titleContainer, borderStyle, { borderColor } ] }\n\t\t\t\taccessible={ ! this.props.isSelected }\n\t\t\t\taccessibilityLabel={\n\t\t\t\t\tisEmpty( title ) ?\n\t\t\t\t\t\t/* translators: accessibility text. empty post title. */\n\t\t\t\t\t\t__( 'Post title. Empty' ) :\n\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t/* translators: accessibility text. %s: text content of the post title. */\n\t\t\t\t\t\t\t__( 'Post title. %s' ),\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<RichText\n\t\t\t\t\ttagName={ 'p' }\n\t\t\t\t\trootTagsToEliminate={ [ 'strong' ] }\n\t\t\t\t\tunstableOnFocus={ this.props.onSelect }\n\t\t\t\t\tonBlur={ this.props.onBlur } // always assign onBlur as a props\n\t\t\t\t\tmultiline={ false }\n\t\t\t\t\tstyle={ style }\n\t\t\t\t\tstyles={ styles }\n\t\t\t\t\tfontSize={ 24 }\n\t\t\t\t\tfontWeight={ 'bold' }\n\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tthis.props.onUpdate( value );\n\t\t\t\t\t} }\n\t\t\t\t\tplaceholder={ decodedPlaceholder }\n\t\t\t\t\tvalue={ title }\n\t\t\t\t\tonSelectionChange={ () => { } }\n\t\t\t\t\tonEnter={ this.props.onEnterPress }\n\t\t\t\t\tdisableEditingMenu={ true }\n\t\t\t\t\t__unstablePasteHandler={ pasteHandler }\n\t\t\t\t\t__unstableIsSelected={ this.props.isSelected }\n\t\t\t\t>\n\t\t\t\t</RichText>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tisPostTitleSelected,\n\t\t} = select( 'core/editor' );\n\n\t\tconst { getSelectedBlockClientId } = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tisAnyBlockSelected: !! getSelectedBlockClientId(),\n\t\t\tisSelected: isPostTitleSelected(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst {\n\t\t\tundo,\n\t\t\tredo,\n\t\t\ttogglePostTitleSelection,\n\t\t} = dispatch( 'core/editor' );\n\n\t\tconst {\n\t\t\tclearSelectedBlock,\n\t\t\tinsertDefaultBlock,\n\t\t} = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tonEnterPress() {\n\t\t\t\tinsertDefaultBlock( undefined, undefined, 0 );\n\t\t\t},\n\t\t\tonUndo: undo,\n\t\t\tonRedo: redo,\n\t\t\tonSelect() {\n\t\t\t\ttogglePostTitleSelection( true );\n\t\t\t\tclearSelectedBlock();\n\t\t\t},\n\t\t\tonUnselect() {\n\t\t\t\ttogglePostTitleSelection( false );\n\t\t\t},\n\t\t};\n\t} ),\n\twithInstanceId,\n\twithFocusOutside\n)( PostTitle );\n"]}