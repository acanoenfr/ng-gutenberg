{"version":3,"sources":["@wordpress/editor/src/components/provider/index.js"],"names":["map","pick","defaultTo","differenceBy","isEqual","noop","memize","compose","Component","withDispatch","withSelect","__","BlockEditorProvider","transformStyles","apiFetch","addQueryArgs","decodeEntities","unregisterBlockType","withRegistryProvider","mediaUpload","ReusableBlocksButtons","ConvertToGroupButtons","InserterMenuDownloadableBlocksPanel","fetchLinkSuggestions","search","path","per_page","type","posts","post","id","url","title","UNINSTALL_ERROR_NOTICE_ID","EditorProvider","props","arguments","getBlockEditorSettings","maxSize","recovery","updatePostLock","settings","postLock","setupEditor","initialEdits","template","autosave","createWarningNotice","actions","label","editLink","reusableBlocks","hasUploadPermissions","canUserUseUnfilteredHTML","__experimentalReusableBlocks","__experimentalMediaUpload","undefined","__experimentalFetchLinkSuggestions","__experimentalCanUserUseUnfilteredHTML","updateEditorSettings","styles","updatedStyles","updatedCSS","node","document","createElement","innerHTML","body","appendChild","prevProps","downloadableBlocksToUninstall","forEach","blockType","uninstallBlock","name","tearDownEditor","children","blocks","resetEditorBlocks","isReady","resetEditorBlocksWithoutUndoLevel","editorSettings","__experimentalBlockDirectory","select","isEditorReady","__unstableIsEditorReady","getEditorBlocks","__experimentalGetReusableBlocks","canUser","getInstalledBlockTypes","getBlocks","dispatch","__experimentalTearDownEditor","__unstableShouldCreateUndoLevel"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map, pick, defaultTo, differenceBy, isEqual, noop } from 'lodash';\nimport memize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { Component } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { BlockEditorProvider, transformStyles } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { unregisterBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport withRegistryProvider from './with-registry-provider';\nimport { mediaUpload } from '../../utils';\nimport ReusableBlocksButtons from '../reusable-blocks-buttons';\nimport ConvertToGroupButtons from '../convert-to-group-buttons';\nimport InserterMenuDownloadableBlocksPanel from '../inserter-menu-downloadable-blocks-panel';\n\nconst fetchLinkSuggestions = async ( search ) => {\n\tconst posts = await apiFetch( {\n\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\tsearch,\n\t\t\tper_page: 20,\n\t\t\ttype: 'post',\n\t\t} ),\n\t} );\n\n\treturn map( posts, ( post ) => ( {\n\t\tid: post.id,\n\t\turl: post.url,\n\t\ttitle: decodeEntities( post.title ) || __( '(no title)' ),\n\t} ) );\n};\n\nconst UNINSTALL_ERROR_NOTICE_ID = 'block-uninstall-error';\n\nclass EditorProvider extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.getBlockEditorSettings = memize( this.getBlockEditorSettings, {\n\t\t\tmaxSize: 1,\n\t\t} );\n\n\t\t// Assume that we don't need to initialize in the case of an error recovery.\n\t\tif ( props.recovery ) {\n\t\t\treturn;\n\t\t}\n\n\t\tprops.updatePostLock( props.settings.postLock );\n\t\tprops.setupEditor( props.post, props.initialEdits, props.settings.template );\n\n\t\tif ( props.settings.autosave ) {\n\t\t\tprops.createWarningNotice(\n\t\t\t\t__( 'There is an autosave of this post that is more recent than the version below.' ),\n\t\t\t\t{\n\t\t\t\t\tid: 'autosave-exists',\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'View the autosave' ),\n\t\t\t\t\t\t\turl: props.settings.autosave.editLink,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tgetBlockEditorSettings(\n\t\tsettings,\n\t\treusableBlocks,\n\t\thasUploadPermissions,\n\t\tcanUserUseUnfilteredHTML\n\t) {\n\t\treturn {\n\t\t\t...pick( settings, [\n\t\t\t\t'alignWide',\n\t\t\t\t'allowedBlockTypes',\n\t\t\t\t'__experimentalPreferredStyleVariations',\n\t\t\t\t'availableLegacyWidgets',\n\t\t\t\t'bodyPlaceholder',\n\t\t\t\t'codeEditingEnabled',\n\t\t\t\t'colors',\n\t\t\t\t'disableCustomColors',\n\t\t\t\t'disableCustomFontSizes',\n\t\t\t\t'focusMode',\n\t\t\t\t'fontSizes',\n\t\t\t\t'hasFixedToolbar',\n\t\t\t\t'hasPermissionsToManageWidgets',\n\t\t\t\t'imageSizes',\n\t\t\t\t'isRTL',\n\t\t\t\t'maxWidth',\n\t\t\t\t'styles',\n\t\t\t\t'template',\n\t\t\t\t'templateLock',\n\t\t\t\t'titlePlaceholder',\n\t\t\t\t'onUpdateDefaultBlockStyles',\n\t\t\t\t'__experimentalEnableLegacyWidgetBlock',\n\t\t\t\t'__experimentalEnableMenuBlock',\n\t\t\t\t'__experimentalBlockDirectory',\n\t\t\t\t'showInserterHelpPanel',\n\t\t\t] ),\n\t\t\t__experimentalReusableBlocks: reusableBlocks,\n\t\t\t__experimentalMediaUpload: hasUploadPermissions ? mediaUpload : undefined,\n\t\t\t__experimentalFetchLinkSuggestions: fetchLinkSuggestions,\n\t\t\t__experimentalCanUserUseUnfilteredHTML: canUserUseUnfilteredHTML,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.updateEditorSettings( this.props.settings );\n\n\t\tif ( ! this.props.settings.styles ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst updatedStyles = transformStyles( this.props.settings.styles, '.editor-styles-wrapper' );\n\n\t\tmap( updatedStyles, ( updatedCSS ) => {\n\t\t\tif ( updatedCSS ) {\n\t\t\t\tconst node = document.createElement( 'style' );\n\t\t\t\tnode.innerHTML = updatedCSS;\n\t\t\t\tdocument.body.appendChild( node );\n\t\t\t}\n\t\t} );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.settings !== prevProps.settings ) {\n\t\t\tthis.props.updateEditorSettings( this.props.settings );\n\t\t}\n\n\t\t// When a block is installed from the inserter and is unused,\n\t\t// it is removed when saving the post.\n\t\t// Todo: move this to the edit-post package into a separate component.\n\t\tif ( ! isEqual( this.props.downloadableBlocksToUninstall, prevProps.downloadableBlocksToUninstall ) ) {\n\t\t\tthis.props.downloadableBlocksToUninstall.forEach( ( blockType ) => {\n\t\t\t\tthis.props.uninstallBlock( blockType, noop, () => {\n\t\t\t\t\tthis.props.createWarningNotice(\n\t\t\t\t\t\t__( 'Block previews can\\'t uninstall.' ), {\n\t\t\t\t\t\t\tid: UNINSTALL_ERROR_NOTICE_ID,\n\t\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tunregisterBlockType( blockType.name );\n\t\t\t} );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.tearDownEditor();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t\tchildren,\n\t\t\tblocks,\n\t\t\tresetEditorBlocks,\n\t\t\tisReady,\n\t\t\tsettings,\n\t\t\treusableBlocks,\n\t\t\tresetEditorBlocksWithoutUndoLevel,\n\t\t\thasUploadPermissions,\n\t\t} = this.props;\n\n\t\tif ( ! isReady ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst editorSettings = this.getBlockEditorSettings(\n\t\t\tsettings,\n\t\t\treusableBlocks,\n\t\t\thasUploadPermissions,\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t);\n\n\t\treturn (\n\t\t\t<BlockEditorProvider\n\t\t\t\tvalue={ blocks }\n\t\t\t\tonInput={ resetEditorBlocksWithoutUndoLevel }\n\t\t\t\tonChange={ resetEditorBlocks }\n\t\t\t\tsettings={ editorSettings }\n\t\t\t\tuseSubRegistry={ false }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t\t<ReusableBlocksButtons />\n\t\t\t\t<ConvertToGroupButtons />\n\t\t\t\t{ editorSettings.__experimentalBlockDirectory && <InserterMenuDownloadableBlocksPanel /> }\n\t\t\t</BlockEditorProvider>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithRegistryProvider,\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t__unstableIsEditorReady: isEditorReady,\n\t\t\tgetEditorBlocks,\n\t\t\t__experimentalGetReusableBlocks,\n\t\t} = select( 'core/editor' );\n\t\tconst { canUser } = select( 'core' );\n\t\tconst { getInstalledBlockTypes } = select( 'core/block-directory' );\n\t\tconst { getBlocks } = select( 'core/block-editor' );\n\n\t\tconst downloadableBlocksToUninstall = differenceBy( getInstalledBlockTypes(), getBlocks(), 'name' );\n\n\t\treturn {\n\t\t\tcanUserUseUnfilteredHTML: canUserUseUnfilteredHTML(),\n\t\t\tisReady: isEditorReady(),\n\t\t\tblocks: getEditorBlocks(),\n\t\t\treusableBlocks: __experimentalGetReusableBlocks(),\n\t\t\thasUploadPermissions: defaultTo( canUser( 'create', 'media' ), true ),\n\t\t\tdownloadableBlocksToUninstall,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst {\n\t\t\tsetupEditor,\n\t\t\tupdatePostLock,\n\t\t\tresetEditorBlocks,\n\t\t\tupdateEditorSettings,\n\t\t\t__experimentalTearDownEditor,\n\t\t} = dispatch( 'core/editor' );\n\t\tconst { createWarningNotice } = dispatch( 'core/notices' );\n\t\tconst { uninstallBlock } = dispatch( 'core/block-directory' );\n\n\t\treturn {\n\t\t\tsetupEditor,\n\t\t\tupdatePostLock,\n\t\t\tcreateWarningNotice,\n\t\t\tresetEditorBlocks,\n\t\t\tupdateEditorSettings,\n\t\t\tresetEditorBlocksWithoutUndoLevel( blocks ) {\n\t\t\t\tresetEditorBlocks( blocks, {\n\t\t\t\t\t__unstableShouldCreateUndoLevel: false,\n\t\t\t\t} );\n\t\t\t},\n\t\t\ttearDownEditor: __experimentalTearDownEditor,\n\t\t\tuninstallBlock,\n\t\t};\n\t} ),\n] )( EditorProvider );\n"]}