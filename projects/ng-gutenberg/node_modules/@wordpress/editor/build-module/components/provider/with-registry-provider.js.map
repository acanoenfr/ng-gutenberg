{"version":3,"sources":["@wordpress/editor/src/components/provider/with-registry-provider.js"],"names":["useState","useEffect","withRegistry","createRegistry","RegistryProvider","createHigherOrderComponent","storeConfig","blockEditorStoreConfig","applyMiddlewares","withRegistryProvider","WrappedComponent","props","useSubRegistry","registry","additionalProps","subRegistry","setSubRegistry","newRegistry","store","registerStore"],"mappings":";;;;AAAA;;;AAGA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,gBAAvC,QAA+D,iBAA/D;AACA,SAASC,0BAAT,QAA2C,oBAA3C;AACA,SAASC,WAAW,IAAIC,sBAAxB,QAAsD,yBAAtD;AAEA;;;;AAGA,SAASD,WAAT,QAA4B,aAA5B;AACA,OAAOE,gBAAP,MAA6B,yBAA7B;AAEA,IAAMC,oBAAoB,GAAGJ,0BAA0B,CACtD,UAAEK,gBAAF;AAAA,SAAwBR,YAAY,CAAE,UAAES,KAAF,EAAa;AAAA,gCACcA,KADd,CAC1CC,cAD0C;AAAA,QAC1CA,cAD0C,sCACzB,IADyB;AAAA,QACnBC,QADmB,GACcF,KADd,CACnBE,QADmB;AAAA,QACNC,eADM,4BACcH,KADd;;AAElD,QAAK,CAAEC,cAAP,EAAwB;AACvB,aAAO,cAAC,gBAAD,EAAuBE,eAAvB,CAAP;AACA;;AAJiD,oBAMVd,QAAQ,CAAE,IAAF,CANE;AAAA;AAAA,QAM1Ce,WAN0C;AAAA,QAM7BC,cAN6B;;AAOlDf,IAAAA,SAAS,CAAE,YAAM;AAChB,UAAMgB,WAAW,GAAGd,cAAc,CAAE;AACnC,6BAAqBI;AADc,OAAF,EAE/BM,QAF+B,CAAlC;AAGA,UAAMK,KAAK,GAAGD,WAAW,CAACE,aAAZ,CAA2B,aAA3B,EAA0Cb,WAA1C,CAAd,CAJgB,CAKhB;;AACAE,MAAAA,gBAAgB,CAAEU,KAAF,CAAhB;AACAF,MAAAA,cAAc,CAAEC,WAAF,CAAd;AACA,KARQ,EAQN,CAAEJ,QAAF,CARM,CAAT;;AAUA,QAAK,CAAEE,WAAP,EAAqB;AACpB,aAAO,IAAP;AACA;;AAED,WACC,cAAC,gBAAD;AAAkB,MAAA,KAAK,EAAGA;AAA1B,OACC,cAAC,gBAAD,EAAuBD,eAAvB,CADD,CADD;AAKA,GA1BmC,CAApC;AAAA,CADsD,EA4BtD,sBA5BsD,CAAvD;AA+BA,eAAeL,oBAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { withRegistry, createRegistry, RegistryProvider } from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { storeConfig as blockEditorStoreConfig } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport applyMiddlewares from '../../store/middlewares';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) => withRegistry( ( props ) => {\n\t\tconst { useSubRegistry = true, registry, ...additionalProps } = props;\n\t\tif ( ! useSubRegistry ) {\n\t\t\treturn <WrappedComponent { ...additionalProps } />;\n\t\t}\n\n\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\tuseEffect( () => {\n\t\t\tconst newRegistry = createRegistry( {\n\t\t\t\t'core/block-editor': blockEditorStoreConfig,\n\t\t\t}, registry );\n\t\t\tconst store = newRegistry.registerStore( 'core/editor', storeConfig );\n\t\t\t// This should be removed after the refactoring of the effects to controls.\n\t\t\tapplyMiddlewares( store );\n\t\t\tsetSubRegistry( newRegistry );\n\t\t}, [ registry ] );\n\n\t\tif ( ! subRegistry ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t<WrappedComponent { ...additionalProps } />\n\t\t\t</RegistryProvider>\n\t\t);\n\t} ),\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n"]}