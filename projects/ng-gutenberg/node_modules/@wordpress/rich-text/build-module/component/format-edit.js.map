{"version":3,"sources":["@wordpress/rich-text/src/component/format-edit.js"],"names":["withSelect","getActiveFormat","getActiveObject","interactiveContentTags","Set","FormatEdit","formatTypes","onChange","value","allowedFormats","withoutInteractiveFormatting","map","name","Edit","edit","tagName","indexOf","has","activeFormat","isActive","undefined","activeObject","isObjectActive","type","attributes","select","getFormatTypes"],"mappings":";;AAAA;;;AAGA,SAASA,UAAT,QAA2B,iBAA3B;AAEA;;;;AAGA,SAASC,eAAT,QAAgC,sBAAhC;AACA,SAASC,eAAT,QAAgC,sBAAhC;AAEA;;;;;;AAKA,IAAMC,sBAAsB,GAAG,IAAIC,GAAJ,CAAS,CACvC,GADuC,EAEvC,OAFuC,EAGvC,QAHuC,EAIvC,SAJuC,EAKvC,OALuC,EAMvC,QANuC,EAOvC,OAPuC,EAQvC,OARuC,EASvC,QATuC,EAUvC,UAVuC,EAWvC,OAXuC,CAAT,CAA/B;;AAcA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,MAClBC,WADkB,QAClBA,WADkB;AAAA,MAElBC,QAFkB,QAElBA,QAFkB;AAAA,MAGlBC,KAHkB,QAGlBA,KAHkB;AAAA,MAIlBC,cAJkB,QAIlBA,cAJkB;AAAA,MAKlBC,4BALkB,QAKlBA,4BALkB;AAAA,SAOlBJ,WAAW,CAACK,GAAZ,CAAiB,iBAIV;AAAA,QAHNC,IAGM,SAHNA,IAGM;AAAA,QAFAC,IAEA,SAFNC,IAEM;AAAA,QADNC,OACM,SADNA,OACM;;AACN,QAAK,CAAEF,IAAP,EAAc;AACb,aAAO,IAAP;AACA;;AAED,QAAKJ,cAAc,IAAIA,cAAc,CAACO,OAAf,CAAwBJ,IAAxB,MAAmC,CAAC,CAA3D,EAA+D;AAC9D,aAAO,IAAP;AACA;;AAED,QACCF,4BAA4B,IAC5BP,sBAAsB,CAACc,GAAvB,CAA4BF,OAA5B,CAFD,EAGE;AACD,aAAO,IAAP;AACA;;AAED,QAAMG,YAAY,GAAGjB,eAAe,CAAEO,KAAF,EAASI,IAAT,CAApC;AACA,QAAMO,QAAQ,GAAGD,YAAY,KAAKE,SAAlC;AACA,QAAMC,YAAY,GAAGnB,eAAe,CAAEM,KAAF,CAApC;AACA,QAAMc,cAAc,GAAGD,YAAY,KAAKD,SAAjB,IAA8BC,YAAY,CAACE,IAAb,KAAsBX,IAA3E;AAEA,WACC,cAAC,IAAD;AACC,MAAA,GAAG,EAAGA,IADP;AAEC,MAAA,QAAQ,EAAGO,QAFZ;AAGC,MAAA,gBAAgB,EACfA,QAAQ,GAAGD,YAAY,CAACM,UAAb,IAA2B,EAA9B,GAAmC,EAJ7C;AAMC,MAAA,cAAc,EAAGF,cANlB;AAOC,MAAA,sBAAsB,EACrBA,cAAc,GAAGD,YAAY,CAACG,UAAb,IAA2B,EAA9B,GAAmC,EARnD;AAUC,MAAA,KAAK,EAAGhB,KAVT;AAWC,MAAA,QAAQ,EAAGD;AAXZ,MADD;AAeA,GAxCD,CAPkB;AAAA,CAAnB;;AAiDA,eAAeP,UAAU,CAAE,UAAEyB,MAAF;AAAA,SAAgB;AAC1CnB,IAAAA,WAAW,EAAEmB,MAAM,CAAE,gBAAF,CAAN,CAA2BC,cAA3B;AAD6B,GAAhB;AAAA,CAAF,CAAV,CAERrB,UAFQ,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { getActiveFormat } from '../get-active-format';\nimport { getActiveObject } from '../get-active-object';\n\n/**\n * Set of all interactive content tags.\n *\n * @see https://html.spec.whatwg.org/multipage/dom.html#interactive-content\n */\nconst interactiveContentTags = new Set( [\n\t'a',\n\t'audio',\n\t'button',\n\t'details',\n\t'embed',\n\t'iframe',\n\t'input',\n\t'label',\n\t'select',\n\t'textarea',\n\t'video',\n] );\n\nconst FormatEdit = ( {\n\tformatTypes,\n\tonChange,\n\tvalue,\n\tallowedFormats,\n\twithoutInteractiveFormatting,\n} ) =>\n\tformatTypes.map( ( {\n\t\tname,\n\t\tedit: Edit,\n\t\ttagName,\n\t} ) => {\n\t\tif ( ! Edit ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( allowedFormats && allowedFormats.indexOf( name ) === -1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (\n\t\t\twithoutInteractiveFormatting &&\n\t\t\tinteractiveContentTags.has( tagName )\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst activeFormat = getActiveFormat( value, name );\n\t\tconst isActive = activeFormat !== undefined;\n\t\tconst activeObject = getActiveObject( value );\n\t\tconst isObjectActive = activeObject !== undefined && activeObject.type === name;\n\n\t\treturn (\n\t\t\t<Edit\n\t\t\t\tkey={ name }\n\t\t\t\tisActive={ isActive }\n\t\t\t\tactiveAttributes={\n\t\t\t\t\tisActive ? activeFormat.attributes || {} : {}\n\t\t\t\t}\n\t\t\t\tisObjectActive={ isObjectActive }\n\t\t\t\tactiveObjectAttributes={\n\t\t\t\t\tisObjectActive ? activeObject.attributes || {} : {}\n\t\t\t\t}\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t/>\n\t\t);\n\t} );\n\nexport default withSelect( ( select ) => ( {\n\tformatTypes: select( 'core/rich-text' ).getFormatTypes(),\n} ) )( FormatEdit );\n"]}